module.exports=[64795,(a,b,c)=>{var d=a.r(98160);b.exports={allStates:function(){var a=[];return d.forEach(function(b){-1==a.indexOf(b.state)&&a.push(b.state)}),a.sort()},allCities:function(){return d.map(function(a){return a.city}).sort()},allCapitals:function(){return d.filter(function(a){return a.isCapital}).map(function(a){return{city:a.city,state:a.state}}).sort()},citiesForState:function(a){return d.filter(function(b){return b.state===a}).map(function(a){return a.city}).sort()},stateForCity:function(a){return d.filter(function(b){return b.city===a}).map(function(a){return a.state})},capitalOf:function(a){return d.filter(function(b){return b.state===a&&b.isCapital}).map(function(a){return a.city})}}},85449,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(50944),e=a.i(64795);function f(){let a=(0,d.useRouter)(),f=(0,d.useParams)().id,[g,h]=(0,c.useState)(!1),[i,j]=(0,c.useState)(!0),[k,l]=(0,c.useState)([]),[m,n]=(0,c.useState)([]),[o,p]=(0,c.useState)({name:"",city:"",state:"",country:"India"});(0,c.useEffect)(()=>{l(e.default.allStates())},[]),(0,c.useEffect)(()=>{(async()=>{try{let b=await fetch(`/api/locations/${f}`),c=await b.json();if(c.success){if(p({name:c.data.name,city:c.data.city,state:c.data.state,country:c.data.country}),c.data.state){let a=e.default.citiesForState(c.data.state);n(a)}}else alert("Failed to fetch location data"),a.push("/admin/locations")}catch(b){console.error("Error fetching location:",b),alert("Error fetching location data"),a.push("/admin/locations")}finally{j(!1)}})()},[f,a]);let q=a=>{let{name:b,value:c}=a.target;p(a=>({...a,[b]:c}))},r=async b=>{b.preventDefault(),h(!0);try{let b=await fetch(`/api/locations/${f}`,{method:"PUT",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("adminToken")}`},body:JSON.stringify(o)}),c=await b.json();c.success?a.push("/admin/locations"):alert("Failed to update location: "+c.error)}catch(a){console.error("Submit error:",a),alert("Error updating location: "+(a instanceof Error?a.message:"Unknown error"))}finally{h(!1)}};return i?(0,b.jsx)("div",{className:"flex items-center justify-center h-64",children:(0,b.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-4 border-primary border-t-transparent"})}):(0,b.jsxs)("div",{className:"w-100",children:[(0,b.jsxs)("div",{className:"d-flex align-items-center justify-content-between mb-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("h1",{className:"h2 fw-bold text-dark mb-1",children:"Edit Location"}),(0,b.jsx)("p",{className:"text-muted mb-0",children:"Update location information"})]}),(0,b.jsx)("button",{type:"button",onClick:()=>a.back(),className:"btn btn-outline-secondary d-inline-flex align-items-center px-3 py-2",children:"â† Back to Locations"})]}),(0,b.jsxs)("form",{onSubmit:r,className:"w-100",children:[(0,b.jsx)("div",{className:"card shadow-sm mb-4",children:(0,b.jsxs)("div",{className:"card-body p-4",children:[(0,b.jsx)("h2",{className:"h5 fw-semibold text-dark mb-4 border-bottom pb-2",children:"Location Information"}),(0,b.jsxs)("div",{className:"row g-3",children:[(0,b.jsxs)("div",{className:"col-12 col-md-6",children:[(0,b.jsx)("label",{className:"form-label small fw-medium text-muted",children:"Location Name"}),(0,b.jsx)("input",{type:"text",name:"name",value:o.name,onChange:q,required:!0,className:"form-control"})]}),(0,b.jsxs)("div",{className:"col-12 col-md-6",children:[(0,b.jsx)("label",{className:"form-label small fw-medium text-muted",children:"State"}),(0,b.jsxs)("select",{name:"state",value:o.state,onChange:a=>{let b=a.target.value;p(a=>({...a,state:b,city:""})),b?n(e.default.citiesForState(b)):n([])},required:!0,className:"form-control form-select",children:[(0,b.jsx)("option",{value:"",children:"Select State"}),k.map(a=>(0,b.jsx)("option",{value:a,children:a},a))]})]}),(0,b.jsxs)("div",{className:"col-12 col-md-6",children:[(0,b.jsx)("label",{className:"form-label small fw-medium text-muted",children:"City"}),(0,b.jsxs)("select",{name:"city",value:o.city,onChange:q,required:!0,disabled:!o.state,className:"form-control form-select",children:[(0,b.jsx)("option",{value:"",children:o.state?"Select City":"Select State first"}),m.map(a=>(0,b.jsx)("option",{value:a,children:a},a))]}),!o.state&&(0,b.jsx)("small",{className:"text-muted",children:"Please select a state first"})]}),(0,b.jsxs)("div",{className:"col-12 col-md-6",children:[(0,b.jsx)("label",{className:"form-label small fw-medium text-muted",children:"Country"}),(0,b.jsx)("input",{type:"text",name:"country",value:o.country,onChange:q,className:"form-control"})]})]})]})}),(0,b.jsxs)("div",{className:"d-flex justify-content-end gap-3",children:[(0,b.jsx)("button",{type:"button",onClick:()=>a.back(),className:"btn btn-outline-secondary px-4 py-2",children:"Cancel"}),(0,b.jsx)("button",{type:"submit",disabled:g,className:"btn btn-primary px-4 py-2",children:g?"Updating...":"Update Location"})]})]})]})}a.s(["default",()=>f])}];

//# sourceMappingURL=_47593537._.js.map
{"version":3,"sources":["../../../../node_modules/indian-states-cities/src/index.js","../../../../app/admin/locations/edit/%5Bid%5D/page.tsx"],"sourcesContent":["var statescities = require('./statescities.json');\nmodule.exports={\n\tallStates:function(){\n\t\tvar states=[];\n\t\tstatescities.forEach(function(state){\n\t\t\tif(states.indexOf(state.state)==-1){\n\t\t\t\tstates.push(state.state);\n\t\t\t}\t\t\t\n\t\t})\n\t\treturn states.sort();\n\t},\n\tallCities:function(){\n\t\treturn statescities.map(function(city){\n\t\t\treturn city.city;\n\t\t}).sort();\n\t},\n\tallCapitals:function(){\n\t\treturn statescities.filter(function(city){\n\t\t\treturn city.isCapital;\n\t\t}).map(function(city){\n\t\t\treturn {'city':city.city,'state':city.state};\n\t\t}).sort();\n\t},\n\tcitiesForState:function(state){\n\t\treturn statescities.filter(function(city){\n\t\t\treturn city.state===state;\n\t\t}).map(function(city){\n\t\t\treturn city.city;\n\t\t}).sort();\n\t},\n\tstateForCity:function(cityName){\n\t\treturn statescities.filter(function(city){\n\t\t\treturn city.city===cityName;\n\t\t}).map(function(city){\n\t\t\treturn city.state;\n\t\t});\n\t},\n\tcapitalOf:function(state){\n\t\treturn statescities.filter(function(city){\n\t\t\treturn city.state===state && city.isCapital;\n\t\t}).map(function(city){\n\t\t\treturn city.city;\n\t\t});\n\t}\t\n};","'use client';\r\n\r\nimport { useState, useEffect } from 'react';\r\nimport { useRouter, useParams } from 'next/navigation';\r\nimport indianStatesCities from 'indian-states-cities';\r\n\r\nexport default function EditLocationPage() {\r\n  const router = useRouter();\r\n  const params = useParams();\r\n  const locationId = params.id as string;\r\n  \r\n  const [loading, setLoading] = useState(false);\r\n  const [initialLoading, setInitialLoading] = useState(true);\r\n  const [states, setStates] = useState<string[]>([]);\r\n  const [cities, setCities] = useState<string[]>([]);\r\n  \r\n  const [formData, setFormData] = useState({\r\n    name: '',\r\n    city: '',\r\n    state: '',\r\n    country: 'India'\r\n  });\r\n\r\n  useEffect(() => {\r\n    // Load states on component mount\r\n    const statesList = indianStatesCities.allStates();\r\n    setStates(statesList);\r\n  }, []);\r\n\r\n  // Fetch location data for edit mode\r\n  useEffect(() => {\r\n    const fetchLocation = async () => {\r\n      try {\r\n        const response = await fetch(`/api/locations/${locationId}`);\r\n        const data = await response.json();\r\n        \r\n        if (data.success) {\r\n          setFormData({\r\n            name: data.data.name,\r\n            city: data.data.city,\r\n            state: data.data.state,\r\n            country: data.data.country\r\n          });\r\n          \r\n          // Load cities for the current state\r\n          if (data.data.state) {\r\n            const citiesList = indianStatesCities.citiesForState(data.data.state);\r\n            setCities(citiesList);\r\n          }\r\n        } else {\r\n          alert('Failed to fetch location data');\r\n          router.push('/admin/locations');\r\n        }\r\n      } catch (error) {\r\n        console.error('Error fetching location:', error);\r\n        alert('Error fetching location data');\r\n        router.push('/admin/locations');\r\n      } finally {\r\n        setInitialLoading(false);\r\n      }\r\n    };\r\n    \r\n    fetchLocation();\r\n  }, [locationId, router]);\r\n\r\n  const handleInputChange = (e: React.ChangeEvent<HTMLInputElement | HTMLSelectElement>) => {\r\n    const { name, value } = e.target;\r\n    setFormData(prev => ({\r\n      ...prev,\r\n      [name]: value\r\n    }));\r\n  };\r\n\r\n  const handleStateChange = (e: React.ChangeEvent<HTMLSelectElement>) => {\r\n    const selectedState = e.target.value;\r\n    setFormData(prev => ({\r\n      ...prev,\r\n      state: selectedState,\r\n      city: '' // Reset city when state changes\r\n    }));\r\n    \r\n    // Load cities for selected state\r\n    if (selectedState) {\r\n      const citiesList = indianStatesCities.citiesForState(selectedState);\r\n      setCities(citiesList);\r\n    } else {\r\n      setCities([]);\r\n    }\r\n  };\r\n\r\n  const handleSubmit = async (e: React.FormEvent) => {\r\n    e.preventDefault();\r\n    setLoading(true);\r\n    \r\n    try {\r\n      const response = await fetch(`/api/locations/${locationId}`, {\r\n        method: 'PUT',\r\n        headers: {\r\n          'Content-Type': 'application/json',\r\n          'Authorization': `Bearer ${localStorage.getItem('adminToken')}`\r\n        },\r\n        body: JSON.stringify(formData)\r\n      });\r\n\r\n      const data = await response.json();\r\n\r\n      if (data.success) {\r\n        router.push('/admin/locations');\r\n      } else {\r\n        alert('Failed to update location: ' + data.error);\r\n      }\r\n    } catch (error) {\r\n      console.error('Submit error:', error);\r\n      alert('Error updating location: ' + (error instanceof Error ? error.message : 'Unknown error'));\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  if (initialLoading) {\r\n    return (\r\n      <div className=\"flex items-center justify-center h-64\">\r\n        <div className=\"animate-spin rounded-full h-12 w-12 border-4 border-primary border-t-transparent\"></div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div className=\"w-100\">\r\n      {/* Header */}\r\n      <div className=\"d-flex align-items-center justify-content-between mb-4\">\r\n        <div>\r\n          <h1 className=\"h2 fw-bold text-dark mb-1\">Edit Location</h1>\r\n          <p className=\"text-muted mb-0\">Update location information</p>\r\n        </div>\r\n        <button\r\n          type=\"button\"\r\n          onClick={() => router.back()}\r\n          className=\"btn btn-outline-secondary d-inline-flex align-items-center px-3 py-2\"\r\n        >\r\n          ‚Üê Back to Locations\r\n        </button>\r\n      </div>\r\n\r\n      <form onSubmit={handleSubmit} className=\"w-100\">\r\n        {/* Location Information */}\r\n        <div className=\"card shadow-sm mb-4\">\r\n          <div className=\"card-body p-4\">\r\n            <h2 className=\"h5 fw-semibold text-dark mb-4 border-bottom pb-2\">Location Information</h2>\r\n            <div className=\"row g-3\">\r\n              <div className=\"col-12 col-md-6\">\r\n                <label className=\"form-label small fw-medium text-muted\">Location Name</label>\r\n                <input\r\n                  type=\"text\"\r\n                  name=\"name\"\r\n                  value={formData.name}\r\n                  onChange={handleInputChange}\r\n                  required\r\n                  className=\"form-control\"\r\n                />\r\n              </div>\r\n              <div className=\"col-12 col-md-6\">\r\n                <label className=\"form-label small fw-medium text-muted\">State</label>\r\n                <select\r\n                  name=\"state\"\r\n                  value={formData.state}\r\n                  onChange={handleStateChange}\r\n                  required\r\n                  className=\"form-control form-select\"\r\n                >\r\n                  <option value=\"\">Select State</option>\r\n                  {states.map((state) => (\r\n                    <option key={state} value={state}>\r\n                      {state}\r\n                    </option>\r\n                  ))}\r\n                </select>\r\n              </div>\r\n              <div className=\"col-12 col-md-6\">\r\n                <label className=\"form-label small fw-medium text-muted\">City</label>\r\n                <select\r\n                  name=\"city\"\r\n                  value={formData.city}\r\n                  onChange={handleInputChange}\r\n                  required\r\n                  disabled={!formData.state}\r\n                  className=\"form-control form-select\"\r\n                >\r\n                  <option value=\"\">\r\n                    {!formData.state ? 'Select State first' : 'Select City'}\r\n                  </option>\r\n                  {cities.map((city) => (\r\n                    <option key={city} value={city}>\r\n                      {city}\r\n                    </option>\r\n                  ))}\r\n                </select>\r\n                {!formData.state && (\r\n                  <small className=\"text-muted\">Please select a state first</small>\r\n                )}\r\n              </div>\r\n              <div className=\"col-12 col-md-6\">\r\n                <label className=\"form-label small fw-medium text-muted\">Country</label>\r\n                <input\r\n                  type=\"text\"\r\n                  name=\"country\"\r\n                  value={formData.country}\r\n                  onChange={handleInputChange}\r\n                  className=\"form-control\"\r\n                />\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n        {/* Submit Button */}\r\n        <div className=\"d-flex justify-content-end gap-3\">\r\n          <button\r\n            type=\"button\"\r\n            onClick={() => router.back()}\r\n            className=\"btn btn-outline-secondary px-4 py-2\"\r\n          >\r\n            Cancel\r\n          </button>\r\n          <button\r\n            type=\"submit\"\r\n            disabled={loading}\r\n            className=\"btn btn-primary px-4 py-2\"\r\n          >\r\n            {loading ? 'Updating...' : 'Update Location'}\r\n          </button>\r\n        </div>\r\n      </form>\r\n    </div>\r\n  );\r\n}\r\n"],"names":[],"mappings":"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","ignoreList":[0]}
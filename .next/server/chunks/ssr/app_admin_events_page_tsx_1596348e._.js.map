{"version":3,"sources":["../../../../app/admin/events/page.tsx"],"sourcesContent":["'use client';\r\n\r\nimport { useState, useEffect } from 'react';\r\nimport Link from 'next/link';\r\nimport { useRouter } from 'next/navigation';\r\n\r\ninterface Event {\r\n  _id: string;\r\n  title: string;\r\n  slug: string;\r\n  description: string;\r\n  galleryImages: Array<{\r\n    original: string;\r\n    thumbnail: string;\r\n    altText: string;\r\n  }>;\r\n  isActive: boolean;\r\n  isPublished: boolean;\r\n  createdAt: string;\r\n}\r\n\r\nexport default function EventsPage() {\r\n  const router = useRouter();\r\n  const [events, setEvents] = useState<Event[]>([]);\r\n  const [loading, setLoading] = useState(true);\r\n\r\n  useEffect(() => {\r\n    fetchEvents();\r\n  }, []);\r\n\r\n  const fetchEvents = async () => {\r\n    try {\r\n      const response = await fetch('/api/admin/events');\r\n      const data = await response.json();\r\n      \r\n      if (data.success) {\r\n        setEvents(data.data);\r\n      }\r\n    } catch (error) {\r\n      console.error('Error fetching events:', error);\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const handleDelete = async (eventSlug: string, eventTitle: string) => {\r\n    if (!confirm(`Are you sure you want to delete \"${eventTitle}\"?`)) {\r\n      return;\r\n    }\r\n\r\n    try {\r\n      const response = await fetch(`/api/events/${eventSlug}`, {\r\n        method: 'DELETE',\r\n        headers: {\r\n          'Authorization': `Bearer ${localStorage.getItem('adminToken')}`\r\n        }\r\n      });\r\n\r\n      const data = await response.json();\r\n\r\n      if (data.success) {\r\n        alert('Event deleted successfully!');\r\n        fetchEvents();\r\n      } else {\r\n        alert('Failed to delete event: ' + data.error);\r\n      }\r\n    } catch (error) {\r\n      console.error('Error deleting event:', error);\r\n      alert('Error deleting event');\r\n    }\r\n  };\r\n\r\n  const formatDate = (dateString: string) => {\r\n    return new Date(dateString).toLocaleDateString('en-US', {\r\n      year: 'numeric',\r\n      month: 'short',\r\n      day: 'numeric'\r\n    });\r\n  };\r\n\r\n  const handleStatusUpdate = async (id: string, currentStatus: boolean) => {\r\n    try {\r\n      const response = await fetch(`/api/events/updateStatus`, {\r\n        method: \"POST\",\r\n        headers: {\r\n          \"Content-Type\": \"application/json\",\r\n        },\r\n        body: JSON.stringify({\r\n          _id: id,\r\n          isActive: !currentStatus,\r\n        }),\r\n      });\r\n\r\n      const result = await response.json();\r\n\r\n      if (result.success) {\r\n        setEvents(prevProjects =>\r\n          prevProjects.map(proj =>\r\n            proj._id === id ? { ...proj, isActive: !currentStatus, isPublished: !currentStatus } : proj\r\n          )\r\n        );\r\n      } else {\r\n        alert(result.message || \"Failed to update status\");\r\n      }\r\n    } catch (err) {\r\n      console.error(\"Error updating project status:\", err);\r\n      alert(\"Error updating project status\");\r\n    } \r\n  };\r\n\r\n  return (\r\n    <div className=\"w-100\">\r\n      {/* Header */}\r\n      <div className=\"d-flex align-items-center justify-content-between mb-4\">\r\n        <div>\r\n          <h1 className=\"h2 fw-bold text-dark mb-1\">Events Management</h1>\r\n          <p className=\"text-muted mb-0\">Manage all events and activities</p>\r\n        </div>\r\n        <Link\r\n          href=\"/admin/events/add\"\r\n          className=\"btn btn-primary d-inline-flex align-items-center px-3 py-2\"\r\n        >\r\n          <i className=\"fas fa-plus me-2\"></i>\r\n          Add New Event\r\n        </Link>\r\n      </div>\r\n\r\n      {/* Events Table */}\r\n      <div className=\"card shadow-sm\">\r\n        <div className=\"card-body p-0\">\r\n          {loading ? (\r\n            <div className=\"text-center py-5\">\r\n              <div className=\"spinner-border text-primary\" role=\"status\">\r\n                <span className=\"visually-hidden\">Loading...</span>\r\n              </div>\r\n              <p className=\"mt-3\">Loading events...</p>\r\n            </div>\r\n          ) : events.length === 0 ? (\r\n            <div className=\"text-center py-5\">\r\n              <div className=\"alert alert-info\" role=\"alert\">\r\n                <h4 className=\"alert-heading\">No Events Found</h4>\r\n                <p>There are no events available at the moment.</p>\r\n                <Link href=\"/admin/events/add\" className=\"btn btn-primary\">\r\n                  Add First Event\r\n                </Link>\r\n              </div>\r\n            </div>\r\n          ) : (\r\n            <div className=\"table-responsive\">\r\n              <table className=\"table table-hover mb-0\">\r\n                <thead className=\"table-light\">\r\n                  <tr>\r\n                    <th className=\"border-0\">Event</th>\r\n                    <th className=\"border-0\">Gallery Images</th>\r\n                    <th className=\"border-0\">Status</th>\r\n                    <th className=\"border-0\">Created</th>\r\n                    <th className=\"border-0\">Actions</th>\r\n                  </tr>\r\n                </thead>\r\n                <tbody>\r\n                  {events.map((event) => (\r\n                    <tr key={event._id}>\r\n                      <td>\r\n                        <div>\r\n                          <h6 className=\"mb-1 fw-semibold\">{event.title}</h6>\r\n                          {/* <p className=\"mb-0 text-muted small\">{event.description}</p> */}\r\n                        </div>\r\n                      </td>\r\n                      <td>\r\n                        <div className=\"d-flex align-items-center\">\r\n                          {event.galleryImages.length > 0 ? (\r\n                            <img\r\n                              src={event.galleryImages[0].thumbnail}\r\n                              alt={event.title}\r\n                              className=\"rounded me-2\"\r\n                              style={{ width: '40px', height: '40px', objectFit: 'cover' }}\r\n                            />\r\n                          ) : (\r\n                            <div className=\"bg-light rounded me-2 d-flex align-items-center justify-content-center\" style={{ width: '40px', height: '40px' }}>\r\n                              <i className=\"fa fa-image text-muted\"></i>\r\n                            </div>\r\n                          )}\r\n                          <span className=\"small text-muted\">{event.galleryImages.length} images</span>\r\n                        </div>\r\n                      </td>\r\n                      <td>\r\n                        <button\r\n                          className={`badge rounded-pill border-0 px-3 py-2 ${\r\n                            event.isActive ? \"bg-success\" : \"bg-danger\"\r\n                          }`}\r\n                          style={{ cursor: \"pointer\" }}\r\n                          onClick={() => handleStatusUpdate(event._id, event.isActive)}\r\n                        >\r\n                          <span\r\n                            className={`badge rounded-pill ${\r\n                              event.isActive\r\n                                ? \"bg-success\"\r\n                                : \"bg-danger\"\r\n                            }`}\r\n                          >\r\n                            {event.isActive ? \"Active\" : \"Inactive\"}\r\n                          </span>\r\n                        </button>\r\n                      </td>     \r\n                      <td>\r\n                        <div className=\"text-muted small\">{formatDate(event.createdAt)}</div>\r\n                      </td>\r\n                      <td>\r\n                        <div className=\"d-flex gap-2\">\r\n                          <Link\r\n                            href={`/admin/events/edit/${event.slug}`}\r\n                            className=\"btn btn-sm btn-outline-primary\"\r\n                          >\r\n                            <i className=\"fas fa-edit\"></i>\r\n                          </Link>\r\n                          <button\r\n                            onClick={() => handleDelete(event.slug, event.title)}\r\n                            className=\"btn btn-sm btn-outline-danger\"\r\n                          >\r\n                            <i className=\"fas fa-trash\"></i>\r\n                          </button>\r\n                        </div>\r\n                      </td>\r\n                    </tr>\r\n                  ))}\r\n                </tbody>\r\n              </table>\r\n            </div>\r\n          )}\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n"],"names":[],"mappings":"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"}
module.exports=[78487,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(38246),e=a.i(50944);function f(){(0,e.useRouter)();let[a,f]=(0,c.useState)([]),[g,h]=(0,c.useState)(!0);(0,c.useEffect)(()=>{i()},[]);let i=async()=>{try{let a=await fetch("/api/admin/events"),b=await a.json();b.success&&f(b.data)}catch(a){console.error("Error fetching events:",a)}finally{h(!1)}},j=async(a,b)=>{if(confirm(`Are you sure you want to delete "${b}"?`))try{let b=await fetch(`/api/events/${a}`,{method:"DELETE",headers:{Authorization:`Bearer ${localStorage.getItem("adminToken")}`}}),c=await b.json();c.success?(alert("Event deleted successfully!"),i()):alert("Failed to delete event: "+c.error)}catch(a){console.error("Error deleting event:",a),alert("Error deleting event")}},k=async(a,b)=>{try{let c=await fetch("/api/events/updateStatus",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({_id:a,isActive:!b})}),d=await c.json();d.success?f(c=>c.map(c=>c._id===a?{...c,isActive:!b,isPublished:!b}:c)):alert(d.message||"Failed to update status")}catch(a){console.error("Error updating project status:",a),alert("Error updating project status")}};return(0,b.jsxs)("div",{className:"w-100",children:[(0,b.jsxs)("div",{className:"d-flex align-items-center justify-content-between mb-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("h1",{className:"h2 fw-bold text-dark mb-1",children:"Events Management"}),(0,b.jsx)("p",{className:"text-muted mb-0",children:"Manage all events and activities"})]}),(0,b.jsxs)(d.default,{href:"/admin/events/add",className:"btn btn-primary d-inline-flex align-items-center px-3 py-2",children:[(0,b.jsx)("i",{className:"fas fa-plus me-2"}),"Add New Event"]})]}),(0,b.jsx)("div",{className:"card shadow-sm",children:(0,b.jsx)("div",{className:"card-body p-0",children:g?(0,b.jsxs)("div",{className:"text-center py-5",children:[(0,b.jsx)("div",{className:"spinner-border text-primary",role:"status",children:(0,b.jsx)("span",{className:"visually-hidden",children:"Loading..."})}),(0,b.jsx)("p",{className:"mt-3",children:"Loading events..."})]}):0===a.length?(0,b.jsx)("div",{className:"text-center py-5",children:(0,b.jsxs)("div",{className:"alert alert-info",role:"alert",children:[(0,b.jsx)("h4",{className:"alert-heading",children:"No Events Found"}),(0,b.jsx)("p",{children:"There are no events available at the moment."}),(0,b.jsx)(d.default,{href:"/admin/events/add",className:"btn btn-primary",children:"Add First Event"})]})}):(0,b.jsx)("div",{className:"table-responsive",children:(0,b.jsxs)("table",{className:"table table-hover mb-0",children:[(0,b.jsx)("thead",{className:"table-light",children:(0,b.jsxs)("tr",{children:[(0,b.jsx)("th",{className:"border-0",children:"Event"}),(0,b.jsx)("th",{className:"border-0",children:"Gallery Images"}),(0,b.jsx)("th",{className:"border-0",children:"Status"}),(0,b.jsx)("th",{className:"border-0",children:"Created"}),(0,b.jsx)("th",{className:"border-0",children:"Actions"})]})}),(0,b.jsx)("tbody",{children:a.map(a=>(0,b.jsxs)("tr",{children:[(0,b.jsx)("td",{children:(0,b.jsx)("div",{children:(0,b.jsx)("h6",{className:"mb-1 fw-semibold",children:a.title})})}),(0,b.jsx)("td",{children:(0,b.jsxs)("div",{className:"d-flex align-items-center",children:[a.galleryImages.length>0?(0,b.jsx)("img",{src:a.galleryImages[0].thumbnail,alt:a.title,className:"rounded me-2",style:{width:"40px",height:"40px",objectFit:"cover"}}):(0,b.jsx)("div",{className:"bg-light rounded me-2 d-flex align-items-center justify-content-center",style:{width:"40px",height:"40px"},children:(0,b.jsx)("i",{className:"fa fa-image text-muted"})}),(0,b.jsxs)("span",{className:"small text-muted",children:[a.galleryImages.length," images"]})]})}),(0,b.jsx)("td",{children:(0,b.jsx)("button",{className:`badge rounded-pill border-0 px-3 py-2 ${a.isActive?"bg-success":"bg-danger"}`,style:{cursor:"pointer"},onClick:()=>k(a._id,a.isActive),children:(0,b.jsx)("span",{className:`badge rounded-pill ${a.isActive?"bg-success":"bg-danger"}`,children:a.isActive?"Active":"Inactive"})})}),(0,b.jsx)("td",{children:(0,b.jsx)("div",{className:"text-muted small",children:new Date(a.createdAt).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"})})}),(0,b.jsx)("td",{children:(0,b.jsxs)("div",{className:"d-flex gap-2",children:[(0,b.jsx)(d.default,{href:`/admin/events/edit/${a.slug}`,className:"btn btn-sm btn-outline-primary",children:(0,b.jsx)("i",{className:"fas fa-edit"})}),(0,b.jsx)("button",{onClick:()=>j(a.slug,a.title),className:"btn btn-sm btn-outline-danger",children:(0,b.jsx)("i",{className:"fas fa-trash"})})]})})]},a._id))})]})})})})]})}a.s(["default",()=>f])}];

//# sourceMappingURL=app_admin_events_page_tsx_1596348e._.js.map
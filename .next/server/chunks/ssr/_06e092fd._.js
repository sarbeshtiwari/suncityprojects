module.exports=[64795,(a,b,c)=>{var d=a.r(98160);b.exports={allStates:function(){var a=[];return d.forEach(function(b){-1==a.indexOf(b.state)&&a.push(b.state)}),a.sort()},allCities:function(){return d.map(function(a){return a.city}).sort()},allCapitals:function(){return d.filter(function(a){return a.isCapital}).map(function(a){return{city:a.city,state:a.state}}).sort()},citiesForState:function(a){return d.filter(function(b){return b.state===a}).map(function(a){return a.city}).sort()},stateForCity:function(a){return d.filter(function(b){return b.city===a}).map(function(a){return a.state})},capitalOf:function(a){return d.filter(function(b){return b.state===a&&b.isCapital}).map(function(a){return a.city})}}},49837,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(50944),e=a.i(64795);function f(){let a=(0,d.useRouter)(),f=(0,d.useParams)(),g=f.id&&"add"!==f.id,h=f.id,[i,j]=(0,c.useState)(!1),[k,l]=(0,c.useState)(g),[m,n]=(0,c.useState)([]),[o,p]=(0,c.useState)([]),[q,r]=(0,c.useState)({name:"",city:"",state:"",country:"India"});(0,c.useEffect)(()=>{n(e.default.allStates())},[]),(0,c.useEffect)(()=>{g&&h&&(async()=>{try{let b=await fetch(`/api/locations/${h}`),c=await b.json();if(c.success){if(r({name:c.data.name,city:c.data.city,state:c.data.state,country:c.data.country}),c.data.state){let a=e.default.citiesForState(c.data.state);p(a)}}else alert("Failed to fetch location data"),a.push("/admin/locations")}catch(b){console.error("Error fetching location:",b),alert("Error fetching location data"),a.push("/admin/locations")}finally{l(!1)}})()},[g,h,a]);let s=a=>{let{name:b,value:c}=a.target;r(a=>({...a,[b]:c}))},t=async b=>{b.preventDefault(),j(!0);try{let b=g?`/api/locations/${h}`:"/api/locations",c=g?"PUT":"POST",d=await fetch(b,{method:c,headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("adminToken")}`},body:JSON.stringify(q)}),e=await d.json();e.success?a.push("/admin/locations"):alert(`Failed to ${g?"update":"create"} location: `+e.error)}catch(a){console.error("Submit error:",a),alert(`Error ${g?"updating":"creating"} location: `+(a instanceof Error?a.message:"Unknown error"))}finally{j(!1)}};return k?(0,b.jsx)("div",{className:"flex items-center justify-center h-64",children:(0,b.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-4 border-primary border-t-transparent"})}):(0,b.jsxs)("div",{className:"w-100",children:[(0,b.jsxs)("div",{className:"d-flex align-items-center justify-content-between mb-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("h1",{className:"h2 fw-bold text-dark mb-1",children:g?"Edit Location":"Add New Location"}),(0,b.jsx)("p",{className:"text-muted mb-0",children:g?"Update location information":"Create a new location for your projects"})]}),(0,b.jsx)("button",{type:"button",onClick:()=>a.back(),className:"btn btn-outline-secondary d-inline-flex align-items-center px-3 py-2",children:"â† Back to Locations"})]}),(0,b.jsxs)("form",{onSubmit:t,className:"w-100",children:[(0,b.jsx)("div",{className:"card shadow-sm mb-4",children:(0,b.jsxs)("div",{className:"card-body p-4",children:[(0,b.jsx)("h2",{className:"h5 fw-semibold text-dark mb-4 border-bottom pb-2",children:"Location Information"}),(0,b.jsxs)("div",{className:"row g-3",children:[(0,b.jsxs)("div",{className:"col-12 col-md-6",children:[(0,b.jsx)("label",{className:"form-label small fw-medium text-muted",children:"Location Name"}),(0,b.jsx)("input",{type:"text",name:"name",value:q.name,onChange:s,required:!0,className:"form-control"})]}),(0,b.jsxs)("div",{className:"col-12 col-md-6",children:[(0,b.jsx)("label",{className:"form-label small fw-medium text-muted",children:"State"}),(0,b.jsxs)("select",{name:"state",value:q.state,onChange:a=>{let b=a.target.value;r(a=>({...a,state:b,city:""})),b?p(e.default.citiesForState(b)):p([])},required:!0,className:"form-control form-select",children:[(0,b.jsx)("option",{value:"",children:"Select State"}),m.map(a=>(0,b.jsx)("option",{value:a,children:a},a))]})]}),(0,b.jsxs)("div",{className:"col-12 col-md-6",children:[(0,b.jsx)("label",{className:"form-label small fw-medium text-muted",children:"City"}),(0,b.jsxs)("select",{name:"city",value:q.city,onChange:s,required:!0,disabled:!q.state,className:"form-control form-select",children:[(0,b.jsx)("option",{value:"",children:q.state?"Select City":"Select State first"}),o.map(a=>(0,b.jsx)("option",{value:a,children:a},a))]}),!q.state&&(0,b.jsx)("small",{className:"text-muted",children:"Please select a state first"})]}),(0,b.jsxs)("div",{className:"col-12 col-md-6",children:[(0,b.jsx)("label",{className:"form-label small fw-medium text-muted",children:"Country"}),(0,b.jsx)("input",{type:"text",name:"country",value:q.country,onChange:s,className:"form-control"})]})]})]})}),(0,b.jsxs)("div",{className:"d-flex justify-content-end gap-3",children:[(0,b.jsx)("button",{type:"button",onClick:()=>a.back(),className:"btn btn-outline-secondary px-4 py-2",children:"Cancel"}),(0,b.jsx)("button",{type:"submit",disabled:i,className:"btn btn-primary px-4 py-2",children:i?g?"Updating...":"Creating...":g?"Update Location":"Create Location"})]})]})]})}a.s(["default",()=>f])}];

//# sourceMappingURL=_06e092fd._.js.map
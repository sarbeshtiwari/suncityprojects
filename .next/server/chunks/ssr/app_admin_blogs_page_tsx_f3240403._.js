module.exports=[42247,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(38246);function e(){let[a,e]=(0,c.useState)([]),[f,g]=(0,c.useState)(!0),[h,i]=(0,c.useState)(null);(0,c.useEffect)(()=>{j()},[]);let j=async()=>{try{let a=localStorage.getItem("adminToken"),b=await fetch("/api/admin/blogs",{headers:{Authorization:`Bearer ${a}`}});if(b.ok){let a=await b.json();e(a.data)}else i("Failed to fetch blogs")}catch(a){i("Error fetching blogs"),console.error("Error:",a)}finally{g(!1)}},k=async b=>{if(window.confirm("Are you sure you want to delete this blog?"))try{let c=localStorage.getItem("adminToken");(await fetch(`/api/blogs/${b}`,{method:"DELETE",headers:{Authorization:`Bearer ${c}`}})).ok?e(a.filter(a=>a.slug!==b)):alert("Failed to delete blog")}catch(a){console.error("Error deleting blog:",a),alert("Error deleting blog")}},l=async(a,b)=>{try{let c=await fetch("/api/blogs/updateStatus",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({_id:a,isActive:!b})}),d=await c.json();d.success?e(c=>c.map(c=>c._id===a?{...c,isActive:!b,isPublished:!b}:c)):alert(d.message||"Failed to update status")}catch(a){console.error("Error updating project status:",a),alert("Error updating project status")}};return f?(0,b.jsx)("div",{className:"d-flex align-items-center justify-content-center",style:{minHeight:"50vh"},children:(0,b.jsxs)("div",{className:"text-center",children:[(0,b.jsx)("div",{className:"spinner mx-auto mb-4",style:{width:"3rem",height:"3rem"}}),(0,b.jsx)("p",{className:"text-muted",children:"Loading blogs..."})]})}):(0,b.jsxs)("div",{className:"mb-5",children:[(0,b.jsxs)("div",{className:"d-flex justify-content-between align-items-center mb-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("h1",{className:"h2 fw-bold text-dark mb-1",children:"Blogs"}),(0,b.jsx)("p",{className:"text-muted mb-0",children:"Manage your blog posts"})]}),(0,b.jsx)(d.default,{href:"/admin/blogs/add",className:"btn btn-primary",children:"Add New Blog"})]}),h&&(0,b.jsx)("div",{className:"alert alert-danger",role:"alert",children:h}),(0,b.jsx)("div",{className:"card shadow-sm",children:(0,b.jsx)("div",{className:"table-responsive",children:(0,b.jsxs)("table",{className:"table table-hover align-middle mb-0",children:[(0,b.jsx)("thead",{className:"table-light",children:(0,b.jsxs)("tr",{children:[(0,b.jsx)("th",{scope:"col",className:"text-uppercase small text-muted",children:"Title"}),(0,b.jsx)("th",{scope:"col",className:"text-uppercase small text-muted",children:"Author"}),(0,b.jsx)("th",{scope:"col",className:"text-uppercase small text-muted",children:"Category"}),(0,b.jsx)("th",{scope:"col",className:"text-uppercase small text-muted",children:"Published"}),(0,b.jsx)("th",{scope:"col",className:"text-uppercase small text-muted",children:"Status"}),(0,b.jsx)("th",{scope:"col",className:"text-uppercase small text-muted",children:"Actions"})]})}),(0,b.jsx)("tbody",{children:a.map(a=>(0,b.jsxs)("tr",{children:[(0,b.jsx)("td",{children:(0,b.jsxs)("div",{className:"d-flex flex-column",children:[(0,b.jsx)("span",{className:"fw-medium text-dark",children:a.title}),(0,b.jsxs)("small",{className:"text-muted",children:[a.excerpt.substring(0,60),"..."]})]})}),(0,b.jsx)("td",{children:(0,b.jsx)("span",{className:"text-muted",children:a.author})}),(0,b.jsx)("td",{children:(0,b.jsx)("span",{className:"badge bg-secondary text-capitalize",children:a.category.replace("-"," ")})}),(0,b.jsx)("td",{children:(0,b.jsx)("span",{className:"text-muted",children:new Date(a.publishedDate).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"})})}),(0,b.jsx)("td",{children:(0,b.jsx)("button",{className:`badge rounded-pill border-0 px-3 py-2 ${a.isPublished?"bg-success":"bg-danger"}`,style:{cursor:"pointer"},onClick:()=>l(a._id,a.isPublished),children:(0,b.jsx)("span",{className:`badge rounded-pill ${a.isPublished?"bg-success":"bg-danger"}`,children:a.isPublished?"Published":"Draft"})})}),(0,b.jsx)("td",{children:(0,b.jsxs)("div",{className:"d-flex gap-2",children:[(0,b.jsx)(d.default,{href:`/admin/blogs/edit/${a.slug}`,className:"btn btn-sm btn-outline-primary",children:"Edit"}),(0,b.jsx)("button",{onClick:b=>{b.stopPropagation(),k(a.slug)},className:"btn btn-sm btn-outline-danger",children:"Delete"})]})})]},a._id))})]})})}),0===a.length&&(0,b.jsxs)("div",{className:"text-center py-5",children:[(0,b.jsx)("div",{className:"text-muted mb-3",children:(0,b.jsx)("i",{className:"fas fa-newspaper",style:{fontSize:"3rem"}})}),(0,b.jsx)("h4",{className:"text-muted",children:"No blogs found"}),(0,b.jsx)("p",{className:"text-muted",children:"Get started by creating your first blog post."}),(0,b.jsx)(d.default,{href:"/admin/blogs/add",className:"btn btn-primary",children:"Add New Blog"})]})]})}a.s(["default",()=>e])}];

//# sourceMappingURL=app_admin_blogs_page_tsx_f3240403._.js.map
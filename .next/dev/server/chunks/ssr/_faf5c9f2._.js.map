{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///D:/ecorp/suncityprojects/components/PropertySearch.tsx"],"sourcesContent":["'use client';\r\n\r\nimport Link from \"next/link\";\r\nimport { useState, useEffect } from 'react';\r\nimport { useRouter } from 'next/navigation';\r\n\r\ninterface PropertySearchProps {\r\n  placeholder?: string;\r\n  showTrendingProperties?: boolean;\r\n}\r\n\r\ninterface Location {\r\n  _id: string;\r\n  name: string;\r\n  city: string;\r\n  state: string;\r\n  country: string;\r\n}\r\n\r\nexport default function PropertySearch({ \r\n  placeholder = \"Project Name/ Location\",\r\n  showTrendingProperties = true \r\n}: PropertySearchProps) {\r\n  const router = useRouter();\r\n  const [searchQuery, setSearchQuery] = useState('');\r\n  const [propertyType, setPropertyType] = useState('');\r\n  const [location, setLocation] = useState('');\r\n  const [locations, setLocations] = useState<Location[]>([]);\r\n  const [loadingLocations, setLoadingLocations] = useState(false);\r\n  const [filteredLocations, setFilteredLocations] = useState<Location[]>([]);\r\n  const [availablePropertyTypes, setAvailablePropertyTypes] = useState<string[]>([]);\r\n  const [loadingFilteredData, setLoadingFilteredData] = useState(false);\r\n  const [isFormReset, setIsFormReset] = useState(false);\r\n\r\n  // Reset form state function - only reset when explicitly called\r\n  const resetFormState = () => {\r\n    // Only reset if not currently in the middle of a form interaction\r\n    if (!isFormReset) {\r\n      setIsFormReset(true);\r\n      setSearchQuery('');\r\n      setPropertyType('');\r\n      setLocation('');\r\n      setFilteredLocations(locations);\r\n      setAvailablePropertyTypes([]);\r\n      setLoadingFilteredData(false);\r\n      \r\n      // Reset the flag after a short delay\r\n      setTimeout(() => {\r\n        setIsFormReset(false);\r\n      }, 100);\r\n    }\r\n  };\r\n\r\n  const handleSearch = (e: React.FormEvent) => {\r\n    e.preventDefault();\r\n    \r\n    // Build query parameters\r\n    const queryParams = new URLSearchParams();\r\n    \r\n    if (searchQuery.trim()) {\r\n      const normalizeSearchTerm = (term: string) => {\r\n        return term\r\n          // Map tokens starting with \"gur...\" to Gurgaon (e.g., gur, gurg, gurugram)\r\n          .replace(/\\bgur[a-z]*\\b/gi, 'Gurgaon')\r\n          .replace(/\\bugram\\b/gi, 'Gurgaon')\r\n          .replace(/\\bugra\\b/gi, 'Gurgaon')\r\n          .replace(/\\bgra\\b/gi, 'Gurgaon')\r\n          .replace(/\\bram\\b/gi, 'Gurgaon')\r\n          .replace(/\\bgram\\b/gi, 'Gurgaon');\r\n      };\r\n\r\n      const normalizedSearch = normalizeSearchTerm(searchQuery.trim());\r\n      queryParams.set('search', normalizedSearch);\r\n    }\r\n    \r\n    if (propertyType) {\r\n      queryParams.set('propertyType', propertyType);\r\n    }\r\n    \r\n    if (location) {\r\n      queryParams.set('city', location);\r\n    }\r\n    \r\n    // Navigate to projects listing page with all filters\r\n    const queryString = queryParams.toString();\r\n    router.push(`/projects${queryString ? `?${queryString}` : ''}`);\r\n    \r\n    // Close the search form after navigation\r\n    closeSearchForm();\r\n  };\r\n\r\n  const handleKeyPress = (e: React.KeyboardEvent) => {\r\n    if (e.key === 'Enter') {\r\n      handleSearch(e);\r\n    }\r\n  };\r\n\r\n  // Reset form state on component mount only\r\n  useEffect(() => {\r\n    // Only reset on initial mount, not on every render\r\n    const hasInitialized = sessionStorage.getItem('propertySearchInitialized');\r\n    if (!hasInitialized) {\r\n      // Only reset the form fields, don't trigger the full reset logic\r\n      setSearchQuery('');\r\n      setPropertyType('');\r\n      setLocation('');\r\n      setAvailablePropertyTypes([]);\r\n      setLoadingFilteredData(false);\r\n      sessionStorage.setItem('propertySearchInitialized', 'true');\r\n    }\r\n  }, []);\r\n\r\n  // Add a delay to prevent immediate reset when search form opens\r\n  useEffect(() => {\r\n    const handleSearchFormOpen = () => {\r\n      // Small delay to prevent interference with search form opening\r\n      setTimeout(() => {\r\n        // Only reset if we have search parameters in URL (indicating we came from search results)\r\n        const urlParams = new URLSearchParams(window.location.search);\r\n        if (urlParams.has('search') || urlParams.has('propertyType') || urlParams.has('city')) {\r\n          // Clear URL parameters and reset form\r\n          window.history.replaceState({}, '', window.location.pathname);\r\n          setSearchQuery('');\r\n          setPropertyType('');\r\n          setLocation('');\r\n          setAvailablePropertyTypes([]);\r\n          setLoadingFilteredData(false);\r\n        }\r\n      }, 200);\r\n    };\r\n\r\n    // Listen for search form open events\r\n    if (typeof window !== 'undefined') {\r\n      window.addEventListener('searchFormOpen', handleSearchFormOpen);\r\n    }\r\n    \r\n    return () => {\r\n      if (typeof window !== 'undefined') {\r\n        window.removeEventListener('searchFormOpen', handleSearchFormOpen);\r\n      }\r\n    };\r\n  }, []);\r\n\r\n  // Fetch locations on component mount\r\n  useEffect(() => {\r\n    const fetchLocations = async () => {\r\n      try {\r\n        setLoadingLocations(true);\r\n        const response = await fetch('/api/locations');\r\n        const data = await response.json();\r\n        \r\n        if (data.success) {\r\n          setLocations(data.data);\r\n          setFilteredLocations(data.data);\r\n        }\r\n      } catch (error) {\r\n        console.error('Error fetching locations:', error);\r\n      } finally {\r\n        setLoadingLocations(false);\r\n      }\r\n    };\r\n\r\n    fetchLocations();\r\n  }, []);\r\n\r\n  // Cleanup effect - only reset session storage on unmount\r\n  useEffect(() => {\r\n    return () => {\r\n      // Clear the initialization flag when component unmounts\r\n      sessionStorage.removeItem('propertySearchInitialized');\r\n    };\r\n  }, []);\r\n\r\n  // Only reset form state when user explicitly navigates back from search results\r\n  useEffect(() => {\r\n    const handlePopState = () => {\r\n      // Only reset if we're coming back from a search results page\r\n      if (window.location.pathname === '/' && window.location.search === '') {\r\n        // Only reset form fields, don't trigger full reset logic\r\n        setSearchQuery('');\r\n        setPropertyType('');\r\n        setLocation('');\r\n        setAvailablePropertyTypes([]);\r\n        setLoadingFilteredData(false);\r\n      }\r\n    };\r\n\r\n    window.addEventListener('popstate', handlePopState);\r\n    \r\n    return () => {\r\n      window.removeEventListener('popstate', handlePopState);\r\n    };\r\n  }, []);\r\n\r\n  // Fetch filtered locations based on property type\r\n  const fetchFilteredLocations = async (selectedPropertyType: string) => {\r\n    if (!selectedPropertyType) {\r\n      setFilteredLocations(locations);\r\n      return;\r\n    }\r\n\r\n    try {\r\n      setLoadingFilteredData(true);\r\n      const response = await fetch(`/api/projects/locations?propertyType=${encodeURIComponent(selectedPropertyType)}`);\r\n      const data = await response.json();\r\n      \r\n      if (data.success) {\r\n        setFilteredLocations(data.data);\r\n        // If no locations available, reset location selection\r\n        if (data.data.length === 0) {\r\n          setLocation('');\r\n        }\r\n      }\r\n    } catch (error) {\r\n      console.error('Error fetching filtered locations:', error);\r\n      setFilteredLocations(locations);\r\n      setLocation('');\r\n    } finally {\r\n      setLoadingFilteredData(false);\r\n    }\r\n  };\r\n\r\n  // Fetch available property types based on city\r\n  const fetchAvailablePropertyTypes = async (selectedCity: string) => {\r\n    if (!selectedCity) {\r\n      setAvailablePropertyTypes([]);\r\n      return;\r\n    }\r\n\r\n    try {\r\n      setLoadingFilteredData(true);\r\n      const response = await fetch(`/api/projects/property-types?city=${encodeURIComponent(selectedCity)}`);\r\n      const data = await response.json();\r\n      \r\n      if (data.success) {\r\n        setAvailablePropertyTypes(data.data);\r\n        // If no property types available, reset property type selection\r\n        if (data.data.length === 0) {\r\n          setPropertyType('');\r\n        }\r\n      }\r\n    } catch (error) {\r\n      console.error('Error fetching available property types:', error);\r\n      setAvailablePropertyTypes([]);\r\n      setPropertyType('');\r\n    } finally {\r\n      setLoadingFilteredData(false);\r\n    }\r\n  };\r\n\r\n  // Handle property type change\r\n  const handlePropertyTypeChange = (e: React.ChangeEvent<HTMLSelectElement>) => {\r\n    const selectedType = e.target.value;\r\n    setPropertyType(selectedType);\r\n    \r\n    // Reset location when property type changes\r\n    // setLocation('');\r\n    \r\n    // Fetch filtered locations for this property type\r\n    fetchFilteredLocations(selectedType);\r\n  };\r\n\r\n  // Handle location change\r\n  const handleLocationChange = (e: React.ChangeEvent<HTMLSelectElement>) => {\r\n    const selectedCity = e.target.value;\r\n    setLocation(selectedCity);\r\n    \r\n    // Reset property type when location changes\r\n    // setPropertyType('');\r\n    \r\n    // Fetch available property types for this city\r\n    fetchAvailablePropertyTypes(selectedCity);\r\n  };\r\n\r\n  // Handle form reset\r\n  const handleFormReset = () => {\r\n    resetFormState();\r\n  };\r\n\r\n  // Helper function to close search form\r\n  const closeSearchForm = () => {\r\n    setTimeout(() => {\r\n      if (typeof window !== 'undefined' && (window as any).closeSearch) {\r\n        (window as any).closeSearch();\r\n      }\r\n    }, 100);\r\n  };\r\n\r\n  return (\r\n    <div className=\"row g-0 justify-content-center position-relative mb-5\" style={{ zIndex: 2 }} data-aos=\"fade-in\">\r\n      <div className=\"col-xxl-6 col-lg-8 col-md-11 search-bar position-relative\">\r\n        <button \r\n          className=\"p-3 bg-white shadow rounded-0 w-100 border-0 d-flex align-items-center justify-content-between\"\r\n          onClick={() => (window as any).openSearch && (window as any).openSearch()}\r\n        >\r\n          <div className=\"d-flex align-items-center gap-3\">\r\n            <i className=\"icon\">\r\n              <svg x=\"0px\" y=\"0px\" viewBox=\"0 0 24 24\" style={{ fill: \"none\", stroke: \"var(--primary-color)\", width: \"1.25rem\" }}>\r\n                <path d=\"M18.3,17.3c-0.3,0.3-0.6,0.7-1,1l5.5,5.5C23,24,23.2,24,23.3,24c0.1,0,0.3,0,0.5-0.2c0.2-0.2,0.2-0.4,0.2-0.5\r\n                  c0-0.1,0-0.3-0.2-0.5L18.3,17.3L18.3,17.3z\" />\r\n                <circle cx=\"10.3\" cy=\"10.3\" r=\"10\" />\r\n              </svg>\r\n            </i>\r\n            <span className=\"small text-uppercase\">Find Your Dream <span className=\"text-primary\">Property</span></span>\r\n          </div>\r\n          <div className=\"icon-button spin mt-0\">\r\n            <div className=\"round-button\">\r\n              <div className=\"circle\"></div><i className=\"fa fa-chevron-right\"></i>\r\n            </div>\r\n          </div>\r\n        </button>\r\n        <div id=\"searchFormWrapper\" className=\"search-form-wrapper bg-white shadow position-absolute top-0 start-0 w-100\">\r\n          <div className=\"search-form p-3\">\r\n            <form onSubmit={handleSearch}>\r\n              <div className=\"row justify-content-center gx-2 gy-4\">\r\n                <div className=\"col-12 search-field\">\r\n                  <div className=\"d-flex align-items-center gap-3 border-bottom\">\r\n                    <i className=\"icon\">\r\n                      <svg x=\"0px\" y=\"0px\" viewBox=\"0 0 24 24\" style={{ fill: \"none\", stroke: \"var(--primary-color)\", width: \"1.5rem\" }}>\r\n                        <path d=\"M18.3,17.3c-0.3,0.3-0.6,0.7-1,1l5.5,5.5C23,24,23.2,24,23.3,24c0.1,0,0.3,0,0.5-0.2c0.2-0.2,0.2-0.4,0.2-0.5\r\n                        c0-0.1,0-0.3-0.2-0.5L18.3,17.3L18.3,17.3z\" />\r\n                        <circle cx=\"10.3\" cy=\"10.3\" r=\"10\" />\r\n                      </svg>\r\n                    </i>\r\n                    <div className=\"form-floating col\">\r\n                      <input \r\n                        type=\"text\" \r\n                        className=\"form-control\" \r\n                        id=\"searchProperty\" \r\n                        placeholder=\"\"\r\n                        value={searchQuery}\r\n                        onChange={(e) => setSearchQuery(e.target.value)}\r\n                        onKeyPress={handleKeyPress}\r\n                      />\r\n                      <label className=\"small text-uppercase text-golden\" htmlFor=\"searchProperty\">{placeholder}</label>\r\n                    </div>\r\n                    <button \r\n                      type=\"button\" \r\n                      className=\"p-0 btn icon-button mt-0\"\r\n                      onClick={(e) => { e.preventDefault(); (window as any).closeSearch && (window as any).closeSearch(); }}\r\n                    >\r\n                      <div className=\"round-button me-0\">\r\n                        <div className=\"circle\"></div><i className=\"fa fa-chevron-up\"></i>\r\n                      </div>\r\n                    </button>\r\n                  </div>\r\n                  {showTrendingProperties && (\r\n                    <div className=\"trending-capsule p-3 bg-light\">\r\n                      <small>Trending Properties</small>\r\n                      <div className=\"d-flex flex-wrap gap-2 mt-3\">\r\n                        <Link\r\n                          href=\"/projects/jewel-of-india\"\r\n                          className=\"btn btn-sm btn-outline-primary rounded-pill\"\r\n                        >\r\n                          Jewel of India <small>Phase-II</small>\r\n                        </Link>\r\n                        <Link \r\n                          href=\"/projects/jewel-tower\"\r\n                          className=\"btn btn-sm btn-outline-primary rounded-pill\"\r\n                        >\r\n                          Jewel Tower\r\n                        </Link>\r\n                        <Link\r\n                          href={\"/projects/suncity-ultima\"}\r\n                          className=\"btn btn-sm btn-outline-primary rounded-pill\"\r\n                        >\r\n                          Suncity Ultima\r\n                        </Link>\r\n                        <Link\r\n                          href={\"/projects/the-empire\"}\r\n                          className=\"btn btn-sm btn-outline-primary rounded-pill\"\r\n                          onClick={() => {\r\n                            router.push(`/projects?search=${encodeURIComponent('The Empire')}`);\r\n                            // Close the search form after navigation\r\n                            closeSearchForm();\r\n                          }}\r\n                        >\r\n                          The Empire\r\n                        </Link>\r\n                        <Link\r\n                          href={\"/projects/jewel-farms\"}\r\n                          className=\"btn btn-sm btn-outline-primary rounded-pill\"\r\n                        >\r\n                          Jewel Farms\r\n                        </Link>\r\n                        <Link\r\n                          href={\"/projects/the-empire-centre\"}\r\n                          className=\"btn btn-sm btn-outline-primary rounded-pill\"\r\n                        >\r\n                          The Empire Centre\r\n                        </Link>\r\n                      </div>\r\n                    </div>\r\n                  )}\r\n                </div>\r\n\r\n                <div className=\"col-sm-6 search-field\">\r\n                  <div className=\"form-floating\">\r\n                    <select \r\n                      className=\"form-select rounded-0\" \r\n                      id=\"propertyType\" \r\n                      aria-label=\"Floating label select example\"\r\n                      value={propertyType}\r\n                      onChange={handlePropertyTypeChange}\r\n                      disabled={loadingFilteredData || (!!location && availablePropertyTypes.length === 0)}\r\n                      onFocus={(e) => {\r\n                        e.stopPropagation();\r\n                        // Prevent reset when user is interacting with dropdown\r\n                        setIsFormReset(false);\r\n                      }}\r\n                      onBlur={(e) => {\r\n                        e.stopPropagation();\r\n                      }}\r\n                      onClick={(e) => {\r\n                        e.stopPropagation();\r\n                        // Prevent reset when user is clicking on dropdown\r\n                        setIsFormReset(false);\r\n                      }}\r\n                    >\r\n                      <option value=\"\">\r\n                        {location && availablePropertyTypes.length === 0 \r\n                          ? 'No projects in this location' \r\n                          : 'Select Property Type'\r\n                        }\r\n                      </option>\r\n                      {availablePropertyTypes.length > 0 ? (\r\n                        availablePropertyTypes.map((type) => (\r\n                          <option key={type} value={type}>\r\n                            {type.charAt(0).toUpperCase() + type.slice(1)}\r\n                          </option>\r\n                        ))\r\n                      ) : !location ? (\r\n                        <>\r\n                          <option value=\"residential\">Residential</option>\r\n                          <option value=\"commercial\">Commercial</option>\r\n                          <option value=\"retail\">Retail</option>\r\n                          <option value=\"education\">Education</option>\r\n                        </>\r\n                      ) : null}\r\n                    </select>\r\n                    <label className=\"small text-uppercase\" htmlFor=\"propertyType\">\r\n                      {loadingFilteredData ? 'Loading...' : 'Property Type'}\r\n                    </label>\r\n                  </div>\r\n                </div>\r\n                <div className=\"col-sm-6 search-field\">\r\n                  <div className=\"form-floating\">\r\n                    <select \r\n                      className=\"form-select rounded-0\" \r\n                      id=\"location\" \r\n                      aria-label=\"Floating label select example\"\r\n                      value={location}\r\n                      onChange={handleLocationChange}\r\n                      disabled={loadingLocations || loadingFilteredData || (!!propertyType && filteredLocations.length === 0)}\r\n                      onFocus={(e) => {\r\n                        e.stopPropagation();\r\n                        // Prevent reset when user is interacting with dropdown\r\n                        setIsFormReset(false);\r\n                      }}\r\n                      onBlur={(e) => {\r\n                        e.stopPropagation();\r\n                      }}\r\n                      onClick={(e) => {\r\n                        e.stopPropagation();\r\n                        // Prevent reset when user is clicking on dropdown\r\n                        setIsFormReset(false);\r\n                      }}\r\n                    >\r\n                      <option value=\"\">\r\n                        {propertyType && filteredLocations.length === 0 \r\n                          ? 'No locations for this property type' \r\n                          : 'Choose Location'\r\n                        }\r\n                      </option>\r\n                      {filteredLocations.length > 0 ? (\r\n                        [...new Set(filteredLocations.map(loc => loc.city))]\r\n                          .sort()\r\n                          .map((city) => (\r\n                            <option key={city} value={city}>\r\n                              {city}\r\n                            </option>\r\n                          ))\r\n                      ) : !propertyType ? (\r\n                        [...new Set(locations.map(loc => loc.city))]\r\n                          .sort()\r\n                          .map((city) => (\r\n                            <option key={city} value={city}>\r\n                              {city}\r\n                            </option>\r\n                          ))\r\n                      ) : null}\r\n                    </select>\r\n                    <label className=\"small text-uppercase\" htmlFor=\"location\">\r\n                      {loadingLocations || loadingFilteredData ? 'Loading Locations...' : 'Location'}\r\n                    </label>\r\n                  </div>\r\n                </div>\r\n                <div className=\"col-sm-3\">\r\n                  <div className=\"readmore mt-0\">\r\n                    <button type=\"submit\" className=\"button w-100 mw-100 mx-auto\">Apply</button>\r\n                    <button \r\n                      type=\"button\" \r\n                      className=\"btn btn-outline-secondary btn-sm w-100 mt-2\" \r\n                      onClick={handleFormReset}\r\n                    >\r\n                      Reset\r\n                    </button>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            </form>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 832, "column": 0}, "map": {"version":3,"sources":["file:///D:/ecorp/suncityprojects/app/projects/page.tsx"],"sourcesContent":["'use client';\r\n\r\nimport { useState, useEffect, Suspense } from 'react';\r\nimport { useSearchParams } from 'next/navigation';\r\nimport PropertySearch from '@/components/PropertySearch';\r\nimport Script from 'next/script';\r\nimport Link from 'next/link';\r\n\r\n\r\ninterface Project {\r\n  _id: string;\r\n  projectName: string;\r\n  slug: string;\r\n  category: string;\r\n  reraNumber: string;\r\n  longDescription: string;\r\n  shortDescription: string;\r\n  projectLocation: string | {\r\n    _id: string;\r\n    name: string;\r\n    city: string;\r\n    state: string;\r\n    country: string;\r\n  };\r\n  status: string;\r\n  area: string;\r\n  type: string;\r\n  heading: string;\r\n  projectLogo: string;\r\n  projectThumbnail: string;\r\n  locationImage: string;\r\n  locationAltText: string;\r\n  isActive: boolean;\r\n  createdAt: string;\r\n  updatedAt: string;\r\n}\r\n\r\n// Component that handles search params logic\r\nfunction ProjectsContent() {\r\n  const [projects, setProjects] = useState<Project[]>([]);\r\n  const [filteredProjects, setFilteredProjects] = useState<Project[]>([]);\r\n  const [loading, setLoading] = useState(true);\r\n  const [error, setError] = useState<string | null>(null);\r\n  const [searchQuery, setSearchQuery] = useState<string>('');\r\n  const [propertyTypeFilter, setPropertyTypeFilter] = useState<string>('');\r\n  const [locationFilter, setLocationFilter] = useState<string>('');\r\n  const searchParams = useSearchParams();\r\n\r\n  useEffect(() => {\r\n    fetchProjects();\r\n  }, []);\r\n\r\n  // Handle search query and filters from URL parameters\r\n  useEffect(() => {\r\n    const query = searchParams.get('search');\r\n    const propertyType = searchParams.get('propertyType');\r\n    const city = searchParams.get('city');\r\n    \r\n    setSearchQuery(query || '');\r\n    setPropertyTypeFilter(propertyType || '');\r\n    setLocationFilter(city || '');\r\n    \r\n    // Apply all filters\r\n    applyFilters(query || '', propertyType || '', city || '');\r\n  }, [searchParams, projects]);\r\n\r\n  // Re-initialize AOS when projects data loads\r\n  useEffect(() => {\r\n    if (projects.length > 0 && typeof window !== 'undefined') {\r\n      // Re-initialize AOS after content loads\r\n      setTimeout(() => {\r\n        const AOS = (window as any).AOS;\r\n        if (AOS) {\r\n          AOS.refresh();\r\n        }\r\n      }, 100);\r\n    }\r\n  }, [projects]);\r\n\r\n  const fetchProjects = async () => {\r\n    try {\r\n      setLoading(true);\r\n      const response = await fetch('/api/projects');\r\n      const data = await response.json();\r\n      \r\n      if (data.success) {\r\n        setProjects(data.data);\r\n        setFilteredProjects(data.data);\r\n      } else {\r\n        setError('Failed to fetch projects');\r\n      }\r\n    } catch (err) {\r\n      setError('Error fetching projects');\r\n      console.error('Error fetching projects:', err);\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const fetchFilteredProjects = async (propertyType: string, city: string) => {\r\n    try {\r\n      setLoading(true);\r\n      const queryParams = new URLSearchParams();\r\n      \r\n      if (propertyType) {\r\n        queryParams.set('propertyType', propertyType);\r\n      }\r\n      if (city) {\r\n        queryParams.set('city', city);\r\n      }\r\n      \r\n      const response = await fetch(`/api/projects/filter?${queryParams.toString()}`);\r\n      const data = await response.json();\r\n      \r\n      if (data.success) {\r\n        setFilteredProjects(data.data);\r\n      } else {\r\n        setError('Failed to fetch filtered projects');\r\n      }\r\n    } catch (err) {\r\n      setError('Error fetching filtered projects');\r\n      console.error('Error fetching filtered projects:', err);\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const applyFilters = (query: string, propertyType: string, city: string) => {\r\n    // If we have property type or city filters, use the filtered API\r\n    if (propertyType || city) {\r\n      fetchFilteredProjects(propertyType, city);\r\n      return;\r\n    }\r\n    \r\n    // Otherwise, use the existing search functionality\r\n    filterProjects(query);\r\n  };\r\n\r\n  const filterProjects = (query: string) => {\r\n    if (!query.trim()) {\r\n      setFilteredProjects(projects);\r\n      return;\r\n    }\r\n\r\n    const filtered = projects.filter(project => {\r\n      const nameMatch = project.projectName.toLowerCase().includes(query.toLowerCase());\r\n      const locationMatch = project.projectLocation && typeof project.projectLocation === 'object' && (\r\n        project.projectLocation.name?.toLowerCase().includes(query.toLowerCase()) ||\r\n        project.projectLocation.city?.toLowerCase().includes(query.toLowerCase()) ||\r\n        project.projectLocation.state?.toLowerCase().includes(query.toLowerCase())\r\n      );\r\n      return nameMatch || locationMatch;\r\n    });\r\n\r\n    setFilteredProjects(filtered);\r\n  };\r\n\r\n  const getCategoryBadgeClass = (category: string) => {\r\n    switch (category.toLowerCase()) {\r\n      case 'residential':\r\n\t\treturn 'bg-white text-dark';\r\n      case 'commercial':\r\n\t\treturn 'bg-white text-dark';\r\n      case 'retail':\r\n\t\treturn 'bg-white text-dark';\r\n      case 'education':\r\n\t\treturn 'bg-white text-dark';\r\n      case 'delivered':\r\n        return 'bg-secondary';\r\n      default:\r\n        return 'bg-white text-dark';\r\n    }\r\n  };\r\n\r\n  const getStatusBadgeClass = (status: string) => {\r\n    switch (status.toLowerCase()) {\r\n      case 'ongoing':\r\n        return 'text-primary';\r\n      case 'completed':\r\n        return 'text-primary';\r\n      case 'delivered':\r\n        return 'text-secondary';\r\n      default:\r\n        return 'text-muted';\r\n    }\r\n  };\r\n\r\n  if (loading) {\r\n    return (\r\n      <main>\r\n        <div className=\"emptyBox\"></div>\r\n        <div className=\"breadcrumbWrapper\">\r\n          <div className=\"container-lg\" data-aos=\"fade-in\">\r\n            <ol className=\"breadcrumb\">\r\n              <li className=\"breadcrumb-item\"><Link href=\"/\">Home</Link></li>\r\n              <li className=\"breadcrumb-item active\">Projects</li>\r\n            </ol>\r\n          </div>\r\n        </div>\r\n        <div className=\"w-100 padding overflow-hidden position-relative section-portfolio bg-white\">\r\n          <div className=\"container-lg\">\r\n            <div className=\"text-center py-5\">\r\n              <div className=\"spinner-border text-primary\" role=\"status\">\r\n                <span className=\"visually-hidden\">Loading...</span>\r\n              </div>\r\n              <p className=\"mt-3\">Loading projects...</p>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </main>\r\n    );\r\n  }\r\n\r\n  if (error) {\r\n    return (\r\n      <main>\r\n        <div className=\"emptyBox\"></div>\r\n        <div className=\"breadcrumbWrapper\">\r\n          <div className=\"container-lg\" data-aos=\"fade-in\">\r\n            <ol className=\"breadcrumb\">\r\n              <li className=\"breadcrumb-item\"><Link href=\"/\">Home</Link></li>\r\n              <li className=\"breadcrumb-item active\">Projects</li>\r\n            </ol>\r\n          </div>\r\n        </div>\r\n        <div className=\"w-100 padding overflow-hidden position-relative section-portfolio bg-white\">\r\n          <div className=\"container-lg\">\r\n            <div className=\"text-center py-5\">\r\n              <div className=\"alert alert-danger\" role=\"alert\">\r\n                <h4 className=\"alert-heading\">Error!</h4>\r\n                <p>{error}</p>\r\n                <div className='readmore'>\r\n                  <button className=\"button button-sm\" onClick={fetchProjects}>\r\n                    Try Again\r\n                  </button>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </main>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <>\r\n      <main>\r\n        <div className=\"emptyBox\"></div>\r\n        <div className=\"breadcrumbWrapper\">\r\n          <div className=\"container-lg\" data-aos=\"fade-in\">\r\n            <ol className=\"breadcrumb\">\r\n              <li className=\"breadcrumb-item\"><Link href=\"/\">Home</Link></li>\r\n              <li className=\"breadcrumb-item active\">Projects</li>\r\n            </ol>\r\n          </div>\r\n        </div>\r\n\r\n        <div className=\"w-100 padding overflow-hidden position-relative section-portfolio bg-white\">\r\n          <div className=\"container-lg\">\r\n            <PropertySearch placeholder=\"Project Name/ Location\" showTrendingProperties={true} />\r\n\r\n            <div className=\"heading text-center mx-auto\" data-aos=\"fade-in\">\r\n              {searchQuery ? (\r\n                <>\r\n                  <h1 className=\"title-xxl text-primary mb-0\">Search Results</h1>\r\n                  <p className=\"text-muted mt-2\">\r\n                    Showing {filteredProjects.length} project{filteredProjects.length !== 1 ? 's' : ''} for \"{searchQuery}\"\r\n                  </p>\r\n                </>\r\n              ) : (\r\n                <h1 className=\"title-xxl text-primary mb-0\">Featured Projects</h1>\r\n              )}\r\n            </div>\r\n            <div className=\"projectContainer\" data-aos=\"fade-in\">\r\n              <div className=\"project-slider\">\r\n                <div className=\"row gy-5\">\r\n                  {filteredProjects.length === 0 ? (\r\n                    <div className=\"col-12 text-center\">\r\n                      <div className=\"alert bg-light py-5\" role=\"alert\">\r\n                        <h4 className=\"alert-heading\">\r\n                          {searchQuery ? 'No Projects Found' : 'No Projects Available'}\r\n                        </h4>\r\n                        <p>\r\n                          {searchQuery \r\n                            ? `No projects found for \"${searchQuery}\". Try a different search term.`\r\n                            : 'There are no projects available at the moment.'\r\n                          }\r\n                        </p>\r\n                        {searchQuery && (\r\n                          <div className=\"readmore\">\r\n                            <Link href=\"/projects\" className=\"button button-sm mx-auto\">\r\n                              View All Projects\r\n                            </Link>\r\n                          </div>\r\n                        )}\r\n                      </div>\r\n                    </div>\r\n                  ) : (\r\n                    filteredProjects.map((project, index) => (\r\n                      <div key={project._id} className=\"col-lg-6 hm-featured-slide\">\r\n                        <Link href={`/projects/${project.slug}`} className=\"inner\">\r\n                          <div className=\"row h-100 flex-column\">\r\n                            <div className=\"hm-featured-slide-img col-md-12 col-12\">\r\n                              <div className=\"img-fluid overflow-hidden position-relative\">\r\n                                <span className={`badge ${getCategoryBadgeClass(project.category)} rounded-pill position-absolute start-0 top-0 m-3 fw-normal`}>\r\n                                  {project.category.toUpperCase()}\r\n                                </span>\r\n                                <img \r\n                                  src={project.projectThumbnail || \"/images/project-thumbs/default.webp\"} \r\n                                  alt={project.projectName} \r\n                                />\r\n                              </div>\r\n                            </div>\r\n                            <div className=\"hm-featured-slide-text-container col-md-12 col-12 flex-grow-1\">\r\n                              <div className=\"hm-featured-slide-text\">\r\n                                <div className=\"project-text\">\r\n                                  <div className=\"featured-box-heading mb-3\">\r\n                                    <h2 className=\"h2 fw-light text-primary mb-0\">{project.projectName}</h2>\r\n                                  </div>\r\n                                  <p className=\"text-primary d-flex align-items-center flex-wrap gap-2\">\r\n                                    <i className=\"fa fa-shield-halved\"></i> {project.reraNumber}\r\n                                  </p>\r\n                                  <p className=\"d-block\">{project.shortDescription}</p>\r\n                                  <div className=\"icon-button\">\r\n                                    <div className=\"round-button\">\r\n                                      <div className=\"circle\"></div><i className=\"fa fa-chevron-right\"></i>\r\n                                    </div> LEARN MORE\r\n                                  </div>\r\n                                </div>\r\n                                <div className=\"project-icons\">\r\n                                  <div className=\"icon-item\">\r\n                                    <div className=\"in\">\r\n                                      <div className=\"icon\"><img src=\"/images/icons/location.svg\" alt=\"\" /></div>\r\n                                      <p className=\"mb-0\">\r\n                                        <small className=\"d-block\">Location</small>\r\n                                        <span>\r\n                                          {typeof project.projectLocation === 'string' \r\n                                            ? project.projectLocation \r\n                                            : String((project.projectLocation as any)?.name || 'Location')\r\n                                          }\r\n                                        </span>\r\n                                      </p>\r\n                                    </div>\r\n                                  </div>\r\n                                  <div className=\"icon-item\">\r\n                                    <div className=\"in\">\r\n                                      <div className=\"icon\"><img src=\"/images/icons/project-status.svg\" alt=\"\" /></div>\r\n                                      <p className=\"mb-0\">\r\n                                        <small className=\"d-block\">Status</small>\r\n                                        <span className={getStatusBadgeClass(project.status)}>{project.status}</span>\r\n                                      </p>\r\n                                    </div>\r\n                                  </div>\r\n                                  <div className=\"icon-item\">\r\n                                    <div className=\"in\">\r\n                                      <div className=\"icon\"><img src=\"/images/icons/area.svg\" alt=\"\" /></div>\r\n                                      <p className=\"mb-0\">\r\n                                        <small className=\"d-block\">Area</small>\r\n                                        <span>{project.area}</span>\r\n                                      </p>\r\n                                    </div>\r\n                                  </div>\r\n                                </div>\r\n                              </div>\r\n                            </div>\r\n                          </div>\r\n                        </Link>\r\n                      </div>\r\n                    ))\r\n                  )}\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </main>\r\n      \r\n      \r\n    </>\r\n  );\r\n}\r\n\r\n// Main page component with Suspense boundary\r\nexport default function Page() {\r\n  return (\r\n    <Suspense fallback={\r\n      <div className=\"container-lg py-5\">\r\n        <div className=\"text-center\">\r\n          <div className=\"spinner-border text-primary\" role=\"status\">\r\n            <span className=\"visually-hidden\">Loading...</span>\r\n          </div>\r\n          <p className=\"mt-3\">Loading projects...</p>\r\n        </div>\r\n      </div>\r\n    }>\r\n      <ProjectsContent />\r\n    </Suspense>\r\n  );\r\n}"],"names":[],"mappings":"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"}}]
}
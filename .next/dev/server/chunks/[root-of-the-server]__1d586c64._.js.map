{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 46, "column": 0}, "map": {"version":3,"sources":["file:///D:/ecorp/suncityprojects/lib/mongodb.ts"],"sourcesContent":["import mongoose from 'mongoose';\r\n\r\nconst MONGODB_URI = process.env.MONGODB_URI || 'mongodb://localhost:27017/suncity-forms';\r\n\r\nif (!MONGODB_URI) {\r\n  throw new Error('Please define the MONGODB_URI environment variable inside .env.local');\r\n}\r\n\r\ndeclare global {\r\n  var mongoose: any;\r\n}\r\n\r\nlet cached = global.mongoose;\r\n\r\nif (!cached) {\r\n  cached = global.mongoose = { conn: null, promise: null };\r\n}\r\n\r\nasync function connectDB() {\r\n  if (cached.conn) {\r\n    return cached.conn;\r\n  }\r\n\r\n  if (!cached.promise) {\r\n    const opts = {\r\n      bufferCommands: false,\r\n    };\r\n\r\n    cached.promise = mongoose.connect(MONGODB_URI, opts).then((mongoose) => {\r\n      return mongoose;\r\n    });\r\n  }\r\n\r\n  try {\r\n    cached.conn = await cached.promise;\r\n  } catch (e) {\r\n    cached.promise = null;\r\n    throw e;\r\n  }\r\n\r\n  return cached.conn;\r\n}\r\n\r\nexport default connectDB;\r\n"],"names":[],"mappings":";;;;AAAA;;AAEA,MAAM,cAAc,QAAQ,GAAG,CAAC,WAAW,IAAI;AAE/C;;AAQA,IAAI,SAAS,OAAO,QAAQ;AAE5B,IAAI,CAAC,QAAQ;IACX,SAAS,OAAO,QAAQ,GAAG;QAAE,MAAM;QAAM,SAAS;IAAK;AACzD;AAEA,eAAe;IACb,IAAI,OAAO,IAAI,EAAE;QACf,OAAO,OAAO,IAAI;IACpB;IAEA,IAAI,CAAC,OAAO,OAAO,EAAE;QACnB,MAAM,OAAO;YACX,gBAAgB;QAClB;QAEA,OAAO,OAAO,GAAG,mKAAQ,CAAC,OAAO,CAAC,aAAa,MAAM,IAAI,CAAC,CAAC;YACzD,OAAO;QACT;IACF;IAEA,IAAI;QACF,OAAO,IAAI,GAAG,MAAM,OAAO,OAAO;IACpC,EAAE,OAAO,GAAG;QACV,OAAO,OAAO,GAAG;QACjB,MAAM;IACR;IAEA,OAAO,OAAO,IAAI;AACpB;uCAEe"}},
    {"offset": {"line": 87, "column": 0}, "map": {"version":3,"sources":["file:///D:/ecorp/suncityprojects/models/Location.ts"],"sourcesContent":["import mongoose, { Schema, Document } from 'mongoose';\r\n\r\nexport interface ILocation extends Document {\r\n  name: string;\r\n  city: string;\r\n  state: string;\r\n  country: string;\r\n  createdAt: Date;\r\n  updatedAt: Date;\r\n}\r\n\r\nconst LocationSchema: Schema = new Schema({\r\n  name: {\r\n    type: String,\r\n    required: [true, 'Location name is required'],\r\n    trim: true\r\n  },\r\n  city: {\r\n    type: String,\r\n    required: [true, 'City is required'],\r\n    trim: true\r\n  },\r\n  state: {\r\n    type: String,\r\n    required: [true, 'State is required'],\r\n    trim: true\r\n  },\r\n  country: {\r\n    type: String,\r\n    required: [true, 'Country is required'],\r\n    trim: true,\r\n    default: 'India'\r\n  }\r\n}, {\r\n  timestamps: true\r\n});\r\n\r\nexport default mongoose.models.Location || mongoose.model<ILocation>('Location', LocationSchema);\r\n"],"names":[],"mappings":";;;;AAAA;;AAWA,MAAM,iBAAyB,IAAI,kKAAM,CAAC;IACxC,MAAM;QACJ,MAAM;QACN,UAAU;YAAC;YAAM;SAA4B;QAC7C,MAAM;IACR;IACA,MAAM;QACJ,MAAM;QACN,UAAU;YAAC;YAAM;SAAmB;QACpC,MAAM;IACR;IACA,OAAO;QACL,MAAM;QACN,UAAU;YAAC;YAAM;SAAoB;QACrC,MAAM;IACR;IACA,SAAS;QACP,MAAM;QACN,UAAU;YAAC;YAAM;SAAsB;QACvC,MAAM;QACN,SAAS;IACX;AACF,GAAG;IACD,YAAY;AACd;uCAEe,mKAAQ,CAAC,MAAM,CAAC,QAAQ,IAAI,mKAAQ,CAAC,KAAK,CAAY,YAAY"}},
    {"offset": {"line": 135, "column": 0}, "map": {"version":3,"sources":["file:///D:/ecorp/suncityprojects/app/api/locations/route.ts"],"sourcesContent":["import { NextRequest, NextResponse } from 'next/server';\r\nimport connectDB from '../../../lib/mongodb';\r\nimport Location from '../../../models/Location';\r\n\r\nexport async function GET() {\r\n  try {\r\n    await connectDB();\r\n    \r\n    const locations = await Location.find({})\r\n      .select('name city state country createdAt updatedAt')\r\n      .sort({ name: 1 });\r\n    \r\n    return NextResponse.json({\r\n      success: true,\r\n      data: locations\r\n    });\r\n  } catch (error: any) {\r\n    console.error('Error fetching locations:', error);\r\n    return NextResponse.json(\r\n      { success: false, error: 'Failed to fetch locations' },\r\n      { status: 500 }\r\n    );\r\n  }\r\n}\r\n\r\nexport async function POST(request: NextRequest) {\r\n  try {\r\n    await connectDB();\r\n    \r\n    const body = await request.json();\r\n    const { name, city, state, country } = body;\r\n    \r\n    // Validate required fields\r\n    if (!name || !city || !state || !country) {\r\n      return NextResponse.json(\r\n        { success: false, error: 'All fields (name, city, state, country) are required' },\r\n        { status: 400 }\r\n      );\r\n    }\r\n    \r\n    // Check if location already exists\r\n    const existingLocation = await Location.findOne({ \r\n      name: { $regex: new RegExp(`^${name}$`, 'i') },\r\n      city: { $regex: new RegExp(`^${city}$`, 'i') }\r\n    });\r\n    \r\n    if (existingLocation) {\r\n      return NextResponse.json(\r\n        { success: false, error: 'Location with this name and city already exists' },\r\n        { status: 409 }\r\n      );\r\n    }\r\n    \r\n    // Create new location\r\n    const newLocation = new Location({\r\n      name,\r\n      city,\r\n      state,\r\n      country\r\n    });\r\n    \r\n    const savedLocation = await newLocation.save();\r\n    \r\n    return NextResponse.json({\r\n      success: true,\r\n      data: savedLocation,\r\n      message: 'Location created successfully'\r\n    }, { status: 201 });\r\n    \r\n  } catch (error: any) {\r\n    console.error('Error creating location:', error);\r\n    return NextResponse.json(\r\n      { success: false, error: 'Failed to create location' },\r\n      { status: 500 }\r\n    );\r\n  }\r\n}"],"names":[],"mappings":";;;;;;AAAA;AACA;AACA;;;;AAEO,eAAe;IACpB,IAAI;QACF,MAAM,IAAA,2HAAS;QAEf,MAAM,YAAY,MAAM,+HAAQ,CAAC,IAAI,CAAC,CAAC,GACpC,MAAM,CAAC,+CACP,IAAI,CAAC;YAAE,MAAM;QAAE;QAElB,OAAO,gJAAY,CAAC,IAAI,CAAC;YACvB,SAAS;YACT,MAAM;QACR;IACF,EAAE,OAAO,OAAY;QACnB,QAAQ,KAAK,CAAC,6BAA6B;QAC3C,OAAO,gJAAY,CAAC,IAAI,CACtB;YAAE,SAAS;YAAO,OAAO;QAA4B,GACrD;YAAE,QAAQ;QAAI;IAElB;AACF;AAEO,eAAe,KAAK,OAAoB;IAC7C,IAAI;QACF,MAAM,IAAA,2HAAS;QAEf,MAAM,OAAO,MAAM,QAAQ,IAAI;QAC/B,MAAM,EAAE,IAAI,EAAE,IAAI,EAAE,KAAK,EAAE,OAAO,EAAE,GAAG;QAEvC,2BAA2B;QAC3B,IAAI,CAAC,QAAQ,CAAC,QAAQ,CAAC,SAAS,CAAC,SAAS;YACxC,OAAO,gJAAY,CAAC,IAAI,CACtB;gBAAE,SAAS;gBAAO,OAAO;YAAuD,GAChF;gBAAE,QAAQ;YAAI;QAElB;QAEA,mCAAmC;QACnC,MAAM,mBAAmB,MAAM,+HAAQ,CAAC,OAAO,CAAC;YAC9C,MAAM;gBAAE,QAAQ,IAAI,OAAO,CAAC,CAAC,EAAE,KAAK,CAAC,CAAC,EAAE;YAAK;YAC7C,MAAM;gBAAE,QAAQ,IAAI,OAAO,CAAC,CAAC,EAAE,KAAK,CAAC,CAAC,EAAE;YAAK;QAC/C;QAEA,IAAI,kBAAkB;YACpB,OAAO,gJAAY,CAAC,IAAI,CACtB;gBAAE,SAAS;gBAAO,OAAO;YAAkD,GAC3E;gBAAE,QAAQ;YAAI;QAElB;QAEA,sBAAsB;QACtB,MAAM,cAAc,IAAI,+HAAQ,CAAC;YAC/B;YACA;YACA;YACA;QACF;QAEA,MAAM,gBAAgB,MAAM,YAAY,IAAI;QAE5C,OAAO,gJAAY,CAAC,IAAI,CAAC;YACvB,SAAS;YACT,MAAM;YACN,SAAS;QACX,GAAG;YAAE,QAAQ;QAAI;IAEnB,EAAE,OAAO,OAAY;QACnB,QAAQ,KAAK,CAAC,4BAA4B;QAC1C,OAAO,gJAAY,CAAC,IAAI,CACtB;YAAE,SAAS;YAAO,OAAO;QAA4B,GACrD;YAAE,QAAQ;QAAI;IAElB;AACF"}}]
}
(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,84827,e=>{"use strict";var a=e.i(43476),l=e.i(71645),s=e.i(18566);function t({initialData:e,isEditMode:i=!1,projectId:r}={}){let o=(0,s.useRouter)(),[m,c]=(0,l.useState)(!1),[n,d]=(0,l.useState)([]),[x,h]=(0,l.useState)([]),[u,b]=(0,l.useState)({metaTitle:e?.metaTitle||"",metaKeywords:e?.metaKeywords||"",metaDescription:e?.metaDescription||"",otherMetaTags:e?.otherMetaTags||"",schemaScript:e?.schemaScript||"",projectName:e?.projectName||"",projectLogo:e?.projectLogo||"",projectThumbnail:e?.projectThumbnail||"",slug:e?.slug||"",category:e?.category||"residential",reraNumber:e?.reraNumber||"",longDescription:e?.longDescription||"",shortDescription:e?.shortDescription||"",projectLocation:"object"==typeof e?.projectLocation?e?.projectLocation?._id||"":e?.projectLocation||"",status:e?.status||"ongoing",area:e?.area||"",type:e?.type||"",heading:e?.heading||"",locationImage:e?.locationImage||"",locationAltText:e?.locationAltText||"",locationType:e?.locationType||"iframe",locationIframe:e?.locationIframe||"",isActive:e?.isActive===void 0||e.isActive,bannerVideo:{mobile:e?.bannerVideo?.mobile||"",desktop:e?.bannerVideo?.desktop||"",tablet:e?.bannerVideo?.tablet||""},bannerVideoPoster:{mobile:e?.bannerVideoPoster?.mobile||"",desktop:e?.bannerVideoPoster?.desktop||"",tablet:e?.bannerVideoPoster?.tablet||""},sitePlanImage:{original:e?.sitePlanImage?.original||"",mobile:e?.sitePlanImage?.mobile||"",desktop:e?.sitePlanImage?.desktop||"",altText:e?.sitePlanImage?.altText||""},galleryImages:e?.galleryImages||[],nearbyLocations:e?.nearbyLocations||[],floorPlans:e?.floorPlans||[],faqs:e?.faqs||[],amenities:e?.amenities?.map(e=>"object"==typeof e?e._id:e)||[]}),[j,p]=(0,l.useState)(new Set);(0,l.useEffect)(()=>{g(),f()},[]);let g=async()=>{try{let e=await fetch("/api/locations"),a=await e.json();a.success&&d(a.data)}catch(e){console.error("Error fetching locations:",e)}},f=async()=>{try{let e=await fetch("/api/amenities"),a=await e.json();a.success&&h(a.data)}catch(e){console.error("Error fetching amenities:",e)}},N=e=>{let{name:a,value:l,type:s}=e.target;if(a.includes(".")){let[e,s]=a.split(".");b(a=>({...a,[e]:{...a[e]||{},[s]:l}}))}else b(t=>{let i={...t,[a]:"checkbox"===s?e.target.checked:l};return"projectName"===a&&l&&(i.slug=l.toLowerCase().replace(/[^a-z0-9\s-]/g,"").replace(/\s+/g,"-").replace(/-+/g,"-").trim()),i})},v=(e,a,l,s)=>{b(t=>({...t,[e]:(t[e]||[]).map((e,t)=>t===a?{...e,[l]:s}:e)}))},y=(e,a)=>{b(l=>({...l,[e]:[...l[e]||[],a]}))},w=(e,a)=>{b(l=>({...l,[e]:(l[e]||[]).filter((e,l)=>l!==a)}))},P=async(e,a)=>{let l=`${a}-${Date.now()}`;p(e=>new Set(e).add(l));try{let l=new FormData;l.append("file",e),l.append("fieldName",a);let s=await fetch("/api/upload",{method:"POST",body:l});if(s.ok)return(await s.json()).url;{let e=await s.json();throw Error(e.details||e.error||"Upload failed")}}catch(e){return console.error("Upload error:",e),alert(`Failed to upload file: ${e instanceof Error?e.message:"Unknown error"}`),null}finally{p(e=>{let a=new Set(e);return a.delete(l),a})}},k=async(e,a)=>{var l,s;let t=e.target.files?.[0];if(!t)return;if(l=t,s=a,l.size>0x3c00000?(alert(`File size must be less than 60MB. Current size: ${(l.size/1048576).toFixed(2)}MB`),!!1):"projectThumbnail"===s&&!["image/webp","image/avif","image/jpeg","image/jpg","image/png"].includes(l.type)&&(alert(`Invalid file type. Allowed types: WebP, AVIF, JPG, PNG. Current type: ${l.type}`),!!1)){e.target.value="";return}let i=await P(t,a);if(i)if(a.includes(".")){let[e,l]=a.split(".");b(a=>({...a,[e]:{...a[e]||{},[l]:i}}))}else b(e=>({...e,[a]:i}))},C=async(e,a,l,s)=>{let t=e.target.files?.[0];if(!t)return;let i=await P(t,`${a}-${l}-${s}`);i&&b(e=>({...e,[a]:(e[a]||[]).map((e,a)=>a===l?{...e,[s]:i}:e)}))},I=async e=>{e.preventDefault(),c(!0);try{let e=["projectName","slug","category","reraNumber","longDescription","shortDescription","projectLocation","status","area","type","heading","locationAltText"];i&&u.projectLogo||e.push("projectLogo"),i&&u.projectThumbnail||e.push("projectThumbnail"),i&&u.locationImage||e.push("locationImage");let a=e.filter(e=>!u[e]);if(a.length>0){alert(`Please fill in all required fields: ${a.join(", ")}`),c(!1);return}let l=i?`/api/projects/manage/${r}`:"/api/projects",s=i?"PUT":"POST",t=await fetch(l,{method:s,headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("adminToken")}`},body:JSON.stringify(u)}),m=await t.json();if(m.success)alert(i?"Project updated successfully!":"Project created successfully!"),o.push("/admin/projects");else{let e=m.details?`${m.error}: ${Array.isArray(m.details)?m.details.join(", "):m.details}`:m.error;alert(`Failed to ${i?"update":"create"} project: `+e)}}catch(e){console.error(`Error ${i?"updating":"creating"} project:`,e),alert(`Error ${i?"updating":"creating"} project: `+(e instanceof Error?e.message:"Unknown error"))}finally{c(!1)}};return(0,a.jsxs)("div",{className:"w-100",children:[(0,a.jsxs)("div",{className:"d-flex align-items-center justify-content-between mb-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{className:"h2 fw-bold text-dark mb-1",children:i?"Edit Project":"Add New Project"}),(0,a.jsx)("p",{className:"text-muted mb-0",children:i?"Update the project details":"Create a new real estate project"})]}),(0,a.jsx)("button",{type:"button",onClick:()=>o.back(),className:"btn btn-outline-secondary d-inline-flex align-items-center px-3 py-2",children:"â† Back to Projects"})]}),(0,a.jsxs)("form",{onSubmit:I,className:"w-100",children:[(0,a.jsx)("div",{className:"card shadow-sm mb-4",children:(0,a.jsxs)("div",{className:"card-body p-4",children:[(0,a.jsx)("h2",{className:"h5 fw-semibold text-dark mb-4 border-bottom pb-2",children:"SEO Details"}),(0,a.jsxs)("div",{className:"row g-3",children:[(0,a.jsxs)("div",{className:"col-12 col-lg-6",children:[(0,a.jsx)("label",{className:"form-label small fw-medium text-muted",children:"Meta Title"}),(0,a.jsx)("input",{type:"text",name:"metaTitle",value:u.metaTitle,onChange:N,required:!0,className:"form-control"})]}),(0,a.jsxs)("div",{className:"col-12 col-lg-6",children:[(0,a.jsx)("label",{className:"form-label small fw-medium text-muted",children:"Meta Keywords"}),(0,a.jsx)("input",{type:"text",name:"metaKeywords",value:u.metaKeywords,onChange:N,className:"form-control"})]}),(0,a.jsxs)("div",{className:"col-12 col-lg-6",children:[(0,a.jsx)("label",{className:"form-label small fw-medium text-muted",children:"Meta Description"}),(0,a.jsx)("textarea",{name:"metaDescription",value:u.metaDescription,onChange:N,className:"form-control",rows:4})]}),(0,a.jsxs)("div",{className:"col-12 col-lg-6",children:[(0,a.jsx)("label",{className:"form-label small fw-medium text-muted",children:"Schema"}),(0,a.jsx)("textarea",{name:"schemaScript",value:u.schemaScript,onChange:N,className:"form-control",rows:4})]}),(0,a.jsxs)("div",{className:"col-12",children:[(0,a.jsx)("label",{className:"form-label small fw-medium text-muted",children:"Other Meta Tags"}),(0,a.jsx)("textarea",{name:"otherMetaTags",value:u.otherMetaTags,onChange:N,className:"form-control",rows:4})]})]})]})}),(0,a.jsx)("div",{className:"card shadow-sm mb-4",children:(0,a.jsxs)("div",{className:"card-body p-4",children:[(0,a.jsx)("h2",{className:"h5 fw-semibold text-dark mb-4 border-bottom pb-2",children:"Project Information"}),(0,a.jsxs)("div",{className:"row g-3",children:[(0,a.jsxs)("div",{className:"col-12 col-lg-6",children:[(0,a.jsx)("label",{className:"form-label small fw-medium text-muted",children:"Project Name"}),(0,a.jsx)("input",{type:"text",name:"projectName",value:u.projectName,onChange:N,required:!0,className:"form-control"})]}),(0,a.jsxs)("div",{className:"col-12 col-lg-6",children:[(0,a.jsx)("label",{className:"form-label small fw-medium text-muted",children:"Slug (URL-friendly name)"}),(0,a.jsx)("input",{type:"text",name:"slug",value:u.slug,onChange:N,placeholder:"Will be auto-generated from project name",className:"form-control"}),(0,a.jsx)("p",{className:"form-text small text-muted",children:"Leave empty to auto-generate from project name"})]}),(0,a.jsxs)("div",{className:"col-12 col-lg-6",children:[(0,a.jsx)("label",{className:"form-label small fw-medium text-muted",children:"Category"}),(0,a.jsxs)("select",{name:"category",value:u.category,onChange:N,required:!0,className:"form-select",children:[(0,a.jsx)("option",{value:"residential",children:"Residential"}),(0,a.jsx)("option",{value:"commercial",children:"Commercial"}),(0,a.jsx)("option",{value:"retail",children:"Retail"}),(0,a.jsx)("option",{value:"education",children:"Education"})]})]}),(0,a.jsxs)("div",{className:"col-12 col-lg-6",children:[(0,a.jsx)("label",{className:"form-label small fw-medium text-muted",children:"Status"}),(0,a.jsxs)("select",{name:"status",value:u.status,onChange:N,required:!0,className:"form-select",children:[(0,a.jsx)("option",{value:"upcoming",children:"Upcoming"}),(0,a.jsx)("option",{value:"ongoing",children:"Ongoing"}),(0,a.jsx)("option",{value:"completed",children:"Completed"})]})]}),(0,a.jsxs)("div",{className:"col-12 col-lg-6",children:[(0,a.jsx)("label",{className:"form-label small fw-medium text-muted",children:"Location"}),(0,a.jsxs)("select",{name:"projectLocation",value:u.projectLocation,onChange:N,required:!0,className:"form-select",children:[(0,a.jsx)("option",{value:"",children:"Select Location"}),n.map(e=>(0,a.jsxs)("option",{value:e._id,children:[e.name,", ",e.city]},e._id))]})]}),(0,a.jsxs)("div",{className:"col-12 col-lg-6",children:[(0,a.jsx)("label",{className:"form-label small fw-medium text-muted",children:"Area"}),(0,a.jsx)("input",{type:"text",name:"area",value:u.area,onChange:N,required:!0,className:"form-control"})]}),(0,a.jsxs)("div",{className:"col-12 col-lg-6",children:[(0,a.jsx)("label",{className:"form-label small fw-medium text-muted",children:"Type"}),(0,a.jsx)("input",{type:"text",name:"type",value:u.type,onChange:N,required:!0,className:"form-control"})]}),(0,a.jsxs)("div",{className:"col-12 col-lg-6",children:[(0,a.jsx)("label",{className:"form-label small fw-medium text-muted",children:"RERA Number"}),(0,a.jsx)("input",{type:"text",name:"reraNumber",value:u.reraNumber,onChange:N,required:!0,className:"form-control"})]}),(0,a.jsxs)("div",{className:"col-12 col-lg-6",children:[(0,a.jsx)("label",{className:"form-label small fw-medium text-muted",children:"Project Logo"}),(0,a.jsx)("input",{type:"file",accept:"image/*",onChange:e=>k(e,"projectLogo"),required:!i||!u.projectLogo,className:"form-control"}),i&&u.projectLogo&&(0,a.jsx)("p",{className:"form-text small text-muted mt-1",children:"Current logo is uploaded. Leave empty to keep existing logo."}),u.projectLogo&&(0,a.jsx)("div",{className:"mt-2",children:(0,a.jsx)("img",{src:u.projectLogo,alt:"Project Logo Preview",className:"rounded",style:{height:"5rem",width:"5rem",objectFit:"cover"}})})]}),(0,a.jsxs)("div",{className:"col-12 col-lg-6",children:[(0,a.jsx)("label",{className:"form-label small fw-medium text-muted",children:"Project Thumbnail"}),(0,a.jsx)("input",{type:"file",accept:".webp,.avif,.jpg,.jpeg,.png",onChange:e=>k(e,"projectThumbnail"),required:!i||!u.projectThumbnail,className:"form-control"}),(0,a.jsx)("p",{className:"form-text small text-muted",children:"Allowed formats: WebP, AVIF, JPG, PNG (Max size: 5MB)"}),i&&u.projectThumbnail&&(0,a.jsx)("p",{className:"form-text small text-muted mt-1",children:"Current image is uploaded. Leave empty to keep existing image."}),u.projectThumbnail&&(0,a.jsx)("div",{className:"mt-2",children:(0,a.jsx)("img",{src:u.projectThumbnail,alt:"Project Thumbnail Preview",className:"rounded",style:{height:"5rem",width:"5rem",objectFit:"cover"}})})]}),(0,a.jsx)("div",{className:"col-12 col-lg-6 d-flex align-items-center",children:(0,a.jsxs)("div",{className:"form-check",children:[(0,a.jsx)("input",{type:"checkbox",name:"isActive",checked:u.isActive,onChange:N,className:"form-check-input",id:"isActive"}),(0,a.jsx)("label",{className:"form-check-label small text-muted",htmlFor:"isActive",children:"Active"})]})})]})]})}),(0,a.jsx)("div",{className:"card shadow-sm mb-4",children:(0,a.jsxs)("div",{className:"card-body p-4",children:[(0,a.jsx)("h2",{className:"h5 fw-semibold text-dark mb-4 border-bottom pb-2",children:"Banner Videos"}),(0,a.jsxs)("div",{className:"row g-3",children:[(0,a.jsxs)("div",{className:"col-12 col-md-4",children:[(0,a.jsx)("label",{className:"form-label small fw-medium text-muted",children:"Mobile Video"}),(0,a.jsx)("input",{type:"file",accept:"video/*",onChange:e=>k(e,"bannerVideo.mobile"),required:!i||!u.bannerVideo.mobile,className:"form-control"}),i&&u.bannerVideo.mobile&&(0,a.jsx)("p",{className:"form-text small text-muted mt-1",children:"Current video is uploaded. Leave empty to keep existing video."}),u.bannerVideo.mobile&&(0,a.jsx)("div",{className:"mt-2",children:(0,a.jsx)("video",{src:u.bannerVideo.mobile,className:"rounded",style:{height:"5rem",width:"8rem",objectFit:"cover"},controls:!0,"webkit-playsinline":!0,playsInline:!0})}),(0,a.jsx)("label",{className:"form-label small fw-medium text-muted mt-3",children:"Mobile Video Poster"}),(0,a.jsx)("input",{type:"file",accept:"image/*",onChange:e=>k(e,"bannerVideoPoster.mobile"),className:"form-control"}),u.bannerVideoPoster.mobile&&(0,a.jsx)("div",{className:"mt-2",children:(0,a.jsx)("img",{src:u.bannerVideoPoster.mobile,alt:"Mobile Video Poster Preview",className:"rounded",style:{height:"5rem",width:"8rem",objectFit:"cover"}})})]}),(0,a.jsxs)("div",{className:"col-12 col-md-4",children:[(0,a.jsx)("label",{className:"form-label small fw-medium text-muted",children:"Tablet Video"}),(0,a.jsx)("input",{type:"file",accept:"video/*",onChange:e=>k(e,"bannerVideo.tablet"),required:!i||!u.bannerVideo.tablet,className:"form-control"}),i&&u.bannerVideo.tablet&&(0,a.jsx)("p",{className:"form-text small text-muted mt-1",children:"Current video is uploaded. Leave empty to keep existing video."}),u.bannerVideo.tablet&&(0,a.jsx)("div",{className:"mt-2",children:(0,a.jsx)("video",{src:u.bannerVideo.tablet,className:"rounded",style:{height:"5rem",width:"8rem",objectFit:"cover"},controls:!0,"webkit-playsinline":!0,playsInline:!0})}),(0,a.jsx)("label",{className:"form-label small fw-medium text-muted mt-3",children:"Tablet Video Poster"}),(0,a.jsx)("input",{type:"file",accept:"image/*",onChange:e=>k(e,"bannerVideoPoster.tablet"),className:"form-control"}),u.bannerVideoPoster.tablet&&(0,a.jsx)("div",{className:"mt-2",children:(0,a.jsx)("img",{src:u.bannerVideoPoster.tablet,alt:"Tablet Video Poster Preview",className:"rounded",style:{height:"5rem",width:"8rem",objectFit:"cover"}})})]}),(0,a.jsxs)("div",{className:"col-12 col-md-4",children:[(0,a.jsx)("label",{className:"form-label small fw-medium text-muted",children:"Desktop Video"}),(0,a.jsx)("input",{type:"file",accept:"video/*",onChange:e=>k(e,"bannerVideo.desktop"),required:!i||!u.bannerVideo.desktop,className:"form-control"}),i&&u.bannerVideo.desktop&&(0,a.jsx)("p",{className:"form-text small text-muted mt-1",children:"Current video is uploaded. Leave empty to keep existing video."}),u.bannerVideo.desktop&&(0,a.jsx)("div",{className:"mt-2",children:(0,a.jsx)("video",{src:u.bannerVideo.desktop,className:"rounded",style:{height:"5rem",width:"8rem",objectFit:"cover"},controls:!0,"webkit-playsinline":!0,playsInline:!0})}),(0,a.jsx)("label",{className:"form-label small fw-medium text-muted mt-3",children:"Desktop Video Poster"}),(0,a.jsx)("input",{type:"file",accept:"image/*",onChange:e=>k(e,"bannerVideoPoster.desktop"),className:"form-control"}),u.bannerVideoPoster.desktop&&(0,a.jsx)("div",{className:"mt-2",children:(0,a.jsx)("img",{src:u.bannerVideoPoster.desktop,alt:"Desktop Video Poster Preview",className:"rounded",style:{height:"5rem",width:"8rem",objectFit:"cover"}})})]})]})]})}),(0,a.jsx)("div",{className:"card shadow-sm mb-4",children:(0,a.jsxs)("div",{className:"card-body p-4",children:[(0,a.jsx)("h2",{className:"h5 fw-semibold text-dark mb-4 border-bottom pb-2",children:"Content Information"}),(0,a.jsxs)("div",{className:"row g-3",children:[(0,a.jsxs)("div",{className:"col-12",children:[(0,a.jsx)("label",{className:"form-label small fw-medium text-muted",children:"Heading"}),(0,a.jsx)("input",{type:"text",name:"heading",value:u.heading,onChange:N,required:!0,className:"form-control"})]}),(0,a.jsxs)("div",{className:"col-12",children:[(0,a.jsx)("label",{className:"form-label small fw-medium text-muted",children:"Short Description"}),(0,a.jsx)("textarea",{name:"shortDescription",value:u.shortDescription,onChange:N,required:!0,rows:3,className:"form-control"})]}),(0,a.jsxs)("div",{className:"col-12",children:[(0,a.jsx)("label",{className:"form-label small fw-medium text-muted",children:"Long Description"}),(0,a.jsx)("textarea",{name:"longDescription",value:u.longDescription,onChange:N,required:!0,rows:5,className:"form-control"})]})]})]})}),(0,a.jsx)("div",{className:"card shadow-sm mb-4",children:(0,a.jsxs)("div",{className:"card-body p-4",children:[(0,a.jsx)("h2",{className:"h5 fw-semibold text-dark mb-4 border-bottom pb-2",children:"Gallery"}),(0,a.jsxs)("div",{className:"d-flex flex-column",children:[(0,a.jsx)("div",{children:u.galleryImages.map((e,l)=>(0,a.jsxs)("div",{className:"border rounded p-3 mb-3",children:[(0,a.jsxs)("div",{className:"d-flex justify-content-between align-items-center mb-3",children:[(0,a.jsxs)("h4",{className:"fw-medium text-dark mb-0",children:["Image ",l+1]}),(0,a.jsx)("button",{type:"button",onClick:()=>w("galleryImages",l),className:"btn btn-sm btn-outline-danger",children:"Remove"})]}),(0,a.jsxs)("div",{className:"row g-3",children:[(0,a.jsxs)("div",{className:"col-12 col-lg-6",children:[(0,a.jsx)("label",{className:"form-label small fw-medium text-muted",children:"Original Image"}),(0,a.jsx)("input",{type:"file",accept:"image/*",onChange:e=>C(e,"galleryImages",l,"original"),className:"form-control"}),e.original&&(0,a.jsx)("div",{className:"mt-2",children:(0,a.jsx)("img",{src:e.original,alt:"Gallery Original Preview",className:"rounded",style:{height:"5rem",width:"8rem",objectFit:"cover"}})})]}),(0,a.jsxs)("div",{className:"col-12 col-lg-6",children:[(0,a.jsx)("label",{className:"form-label small fw-medium text-muted",children:"Mobile Image"}),(0,a.jsx)("input",{type:"file",accept:"image/*",onChange:e=>C(e,"galleryImages",l,"mobile"),className:"form-control"}),e.mobile&&(0,a.jsx)("div",{className:"mt-2",children:(0,a.jsx)("img",{src:e.mobile,alt:"Gallery Mobile Preview",className:"rounded",style:{height:"5rem",width:"8rem",objectFit:"cover"}})})]}),(0,a.jsxs)("div",{className:"col-12 col-lg-6",children:[(0,a.jsx)("label",{className:"form-label small fw-medium text-muted",children:"Desktop Image"}),(0,a.jsx)("input",{type:"file",accept:"image/*",onChange:e=>C(e,"galleryImages",l,"desktop"),className:"form-control"}),e.desktop&&(0,a.jsx)("div",{className:"mt-2",children:(0,a.jsx)("img",{src:e.desktop,alt:"Gallery Desktop Preview",className:"rounded",style:{height:"5rem",width:"8rem",objectFit:"cover"}})})]}),(0,a.jsxs)("div",{className:"col-12 col-lg-6",children:[(0,a.jsx)("label",{className:"form-label small fw-medium text-muted",children:"Alt Text"}),(0,a.jsx)("input",{type:"text",value:e.altText,onChange:e=>v("galleryImages",l,"altText",e.target.value),className:"form-control"})]})]})]},l))}),(0,a.jsxs)("div",{className:"d-flex justify-content-between align-items-center",children:[(0,a.jsx)("h3",{className:"h6 fw-medium text-dark mb-0",children:"Gallery Images"}),(0,a.jsx)("button",{type:"button",onClick:()=>y("galleryImages",{original:"",mobile:"",desktop:"",altText:""}),className:"btn btn-primary btn-sm",children:"Add Image"})]})]})]})}),(0,a.jsx)("div",{className:"card shadow-sm mb-4",children:(0,a.jsxs)("div",{className:"card-body p-4",children:[(0,a.jsx)("h2",{className:"h5 fw-semibold text-dark mb-4 border-bottom pb-2",children:"Amenities"}),(0,a.jsxs)("div",{className:"mb-3",children:[(0,a.jsx)("label",{className:"form-label small fw-medium text-muted",children:"Select Amenities"}),(0,a.jsx)("div",{className:"row g-3",children:x.map(e=>(0,a.jsx)("div",{className:"col-12 col-xxl-2 col-lg-3 col-md-4 col-sm-6",children:(0,a.jsxs)("div",{className:"form-check",children:[(0,a.jsx)("input",{type:"checkbox",value:e._id,checked:u.amenities.includes(e._id),onChange:a=>{a.target.checked?b(a=>({...a,amenities:[...a.amenities,e._id]})):b(a=>({...a,amenities:a.amenities.filter(a=>a!==e._id)}))},className:"form-check-input",id:`amenity-${e._id}`}),(0,a.jsxs)("label",{className:"form-check-label d-flex flex-column text-center align-items-center p-3 border rounded",htmlFor:`amenity-${e._id}`,children:[e.image&&(0,a.jsx)("img",{src:e.image,alt:e.heading,className:"mb-2 rounded",style:{height:"24px",width:"24px",objectFit:"cover"}}),(0,a.jsx)("div",{className:"small fw-medium text-dark",children:e.caption})]})]})},e._id))})]})]})}),(0,a.jsx)("div",{className:"card shadow-sm mb-4",children:(0,a.jsxs)("div",{className:"card-body p-4",children:[(0,a.jsx)("h2",{className:"h5 fw-semibold text-dark mb-4 border-bottom pb-2",children:"Floor Plans"}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{className:"d-flex justify-content-between align-items-center mb-3",children:[(0,a.jsx)("h3",{className:"h6 fw-medium text-dark mb-0",children:"Floor Plans"}),(0,a.jsx)("button",{type:"button",onClick:()=>y("floorPlans",{image:"",altText:"",planType:"",area:"",unit:"sqft"}),className:"btn btn-primary btn-sm",children:"Add Floor Plan"})]}),u.floorPlans.map((e,l)=>(0,a.jsxs)("div",{className:"border rounded p-3 mb-3",children:[(0,a.jsxs)("div",{className:"d-flex justify-content-between align-items-center mb-3",children:[(0,a.jsxs)("h4",{className:"fw-medium text-dark mb-0",children:["Floor Plan ",l+1]}),(0,a.jsx)("button",{type:"button",onClick:()=>w("floorPlans",l),className:"btn btn-sm btn-outline-danger",children:"Remove"})]}),(0,a.jsxs)("div",{className:"row g-3",children:[(0,a.jsxs)("div",{className:"col-12 col-lg-6",children:[(0,a.jsx)("label",{className:"form-label small fw-medium text-muted",children:"Floor Plan Image"}),(0,a.jsx)("input",{type:"file",accept:"image/*",onChange:e=>C(e,"floorPlans",l,"image"),className:"form-control"}),e.image&&(0,a.jsx)("div",{className:"mt-2",children:(0,a.jsx)("img",{src:e.image,alt:"Floor Plan Preview",className:"rounded",style:{height:"5rem",width:"8rem",objectFit:"cover"}})})]}),(0,a.jsxs)("div",{className:"col-12 col-lg-6",children:[(0,a.jsx)("label",{className:"form-label small fw-medium text-muted",children:"Alt Text"}),(0,a.jsx)("input",{type:"text",value:e.altText,onChange:e=>v("floorPlans",l,"altText",e.target.value),className:"form-control"})]}),(0,a.jsxs)("div",{className:"col-12 col-lg-6",children:[(0,a.jsx)("label",{className:"form-label small fw-medium text-muted",children:"Plan Type"}),(0,a.jsx)("input",{type:"text",value:e.planType,onChange:e=>v("floorPlans",l,"planType",e.target.value),className:"form-control"})]}),(0,a.jsxs)("div",{className:"col-12 col-lg-6",children:[(0,a.jsx)("label",{className:"form-label small fw-medium text-muted",children:"Area"}),(0,a.jsxs)("div",{className:"d-flex gap-2",children:[(0,a.jsx)("input",{type:"number",value:e.area,onChange:e=>v("floorPlans",l,"area",e.target.value),className:"form-control",placeholder:"Enter area"}),(0,a.jsxs)("select",{value:e.unit,onChange:e=>v("floorPlans",l,"unit",e.target.value),className:"form-select",style:{width:"auto",minWidth:"100px"},children:[(0,a.jsx)("option",{value:"sqft",children:"Sq Ft"}),(0,a.jsx)("option",{value:"sqmt",children:"Sq Mt"}),(0,a.jsx)("option",{value:"acre",children:"Acre"})]})]})]})]})]},l))]})]})}),(0,a.jsx)("div",{className:"card shadow-sm mb-4",children:(0,a.jsxs)("div",{className:"card-body p-4",children:[(0,a.jsx)("h2",{className:"h5 fw-semibold text-dark mb-4 border-bottom pb-2",children:"Site Plan"}),(0,a.jsxs)("div",{className:"d-flex flex-column gap-3",children:[(0,a.jsxs)("div",{className:"row g-3",children:[(0,a.jsxs)("div",{className:"col-12 col-md-4",children:[(0,a.jsx)("label",{className:"form-label small fw-medium text-muted",children:"Original Image"}),(0,a.jsx)("input",{type:"file",accept:"image/*",onChange:e=>k(e,"sitePlanImage.original"),required:!i||!u.sitePlanImage.original,className:"form-control"}),i&&u.sitePlanImage.original&&(0,a.jsx)("p",{className:"form-text small text-muted mt-1",children:"Current image is uploaded. Leave empty to keep existing image."}),u.sitePlanImage.original&&(0,a.jsx)("div",{className:"mt-2",children:(0,a.jsx)("img",{src:u.sitePlanImage.original,alt:"Site Plan Original Preview",className:"rounded",style:{height:"5rem",width:"8rem",objectFit:"cover"}})})]}),(0,a.jsxs)("div",{className:"col-12 col-md-4",children:[(0,a.jsx)("label",{className:"form-label small fw-medium text-muted",children:"Mobile Image"}),(0,a.jsx)("input",{type:"file",accept:"image/*",onChange:e=>k(e,"sitePlanImage.mobile"),required:!i||!u.sitePlanImage.mobile,className:"form-control"}),i&&u.sitePlanImage.mobile&&(0,a.jsx)("p",{className:"form-text small text-muted mt-1",children:"Current image is uploaded. Leave empty to keep existing image."}),u.sitePlanImage.mobile&&(0,a.jsx)("div",{className:"mt-2",children:(0,a.jsx)("img",{src:u.sitePlanImage.mobile,alt:"Site Plan Mobile Preview",className:"rounded",style:{height:"5rem",width:"8rem",objectFit:"cover"}})})]}),(0,a.jsxs)("div",{className:"col-12 col-md-4",children:[(0,a.jsx)("label",{className:"form-label small fw-medium text-muted",children:"Desktop Image"}),(0,a.jsx)("input",{type:"file",accept:"image/*",onChange:e=>k(e,"sitePlanImage.desktop"),required:!i||!u.sitePlanImage.desktop,className:"form-control"}),i&&u.sitePlanImage.desktop&&(0,a.jsx)("p",{className:"form-text small text-muted mt-1",children:"Current image is uploaded. Leave empty to keep existing image."}),u.sitePlanImage.desktop&&(0,a.jsx)("div",{className:"mt-2",children:(0,a.jsx)("img",{src:u.sitePlanImage.desktop,alt:"Site Plan Desktop Preview",className:"rounded",style:{height:"5rem",width:"8rem",objectFit:"cover"}})})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"form-label small fw-medium text-muted",children:"Site Plan Alt Text"}),(0,a.jsx)("input",{type:"text",name:"sitePlanImage.altText",value:u.sitePlanImage.altText,onChange:N,required:!0,className:"form-control"})]})]})]})}),(0,a.jsx)("div",{className:"card shadow-sm mb-4",children:(0,a.jsxs)("div",{className:"card-body p-4",children:[(0,a.jsx)("h2",{className:"h5 fw-semibold text-dark mb-4 border-bottom pb-2",children:"Nearby Locations"}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{className:"d-flex justify-content-between align-items-center mb-3",children:[(0,a.jsx)("h3",{className:"h6 fw-medium text-dark mb-0",children:"Nearby Locations"}),(0,a.jsx)("button",{type:"button",onClick:()=>y("nearbyLocations",{name:"",distance:"",unit:"minutes",image:"",altText:""}),className:"btn btn-primary btn-sm",children:"Add Location"})]}),u.nearbyLocations.map((e,l)=>(0,a.jsxs)("div",{className:"border rounded p-3 mb-3",children:[(0,a.jsxs)("div",{className:"d-flex justify-content-between align-items-center mb-3",children:[(0,a.jsxs)("h4",{className:"fw-medium text-dark mb-0",children:["Location ",l+1]}),(0,a.jsx)("button",{type:"button",onClick:()=>w("nearbyLocations",l),className:"btn btn-sm btn-outline-danger",children:"Remove"})]}),(0,a.jsxs)("div",{className:"row g-3",children:[(0,a.jsxs)("div",{className:"col-12 col-lg-6",children:[(0,a.jsx)("label",{className:"form-label small fw-medium text-muted",children:"Name"}),(0,a.jsx)("input",{type:"text",value:e.name,onChange:e=>v("nearbyLocations",l,"name",e.target.value),className:"form-control"})]}),(0,a.jsxs)("div",{className:"col-12 col-lg-6",children:[(0,a.jsx)("label",{className:"form-label small fw-medium text-muted",children:"Distance"}),(0,a.jsxs)("div",{className:"d-flex gap-2",children:[(0,a.jsx)("input",{type:"number",value:e.distance,onChange:e=>v("nearbyLocations",l,"distance",e.target.value),className:"form-control",placeholder:"Enter distance"}),(0,a.jsxs)("select",{value:e.unit,onChange:e=>v("nearbyLocations",l,"unit",e.target.value),className:"form-select",style:{width:"auto",minWidth:"120px"},children:[(0,a.jsx)("option",{value:"minutes",children:"Minutes"}),(0,a.jsx)("option",{value:"hrs",children:"Hours"}),(0,a.jsx)("option",{value:"km",children:"KM"}),(0,a.jsx)("option",{value:"meter",children:"Meter"})]})]})]}),(0,a.jsxs)("div",{className:"col-12 col-lg-6",children:[(0,a.jsx)("label",{className:"form-label small fw-medium text-muted",children:"Location Image"}),(0,a.jsx)("input",{type:"file",accept:"image/*",onChange:e=>C(e,"nearbyLocations",l,"image"),className:"form-control"}),e.image&&(0,a.jsx)("div",{className:"mt-2",children:(0,a.jsx)("img",{src:e.image,alt:"Location Preview",className:"rounded",style:{height:"5rem",width:"8rem",objectFit:"cover"}})})]}),(0,a.jsxs)("div",{className:"col-12 col-lg-6",children:[(0,a.jsx)("label",{className:"form-label small fw-medium text-muted",children:"Alt Text"}),(0,a.jsx)("input",{type:"text",value:e.altText,onChange:e=>v("nearbyLocations",l,"altText",e.target.value),className:"form-control"})]})]})]},l))]})]})}),(0,a.jsx)("div",{className:"card shadow-sm mb-4",children:(0,a.jsxs)("div",{className:"card-body p-4",children:[(0,a.jsx)("h2",{className:"h5 fw-semibold text-dark mb-4 border-bottom pb-2",children:"Location Map"}),(0,a.jsxs)("div",{className:"d-flex flex-column gap-3",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"form-label small fw-medium text-muted",children:"Location Type"}),(0,a.jsxs)("div",{className:"d-flex gap-3 mb-3",children:[(0,a.jsxs)("div",{className:"form-check",children:[(0,a.jsx)("input",{type:"radio",name:"locationType",value:"image",checked:"image"===u.locationType,onChange:N,className:"form-check-input",id:"locationTypeImage"}),(0,a.jsx)("label",{className:"form-check-label",htmlFor:"locationTypeImage",children:"Add Image"})]}),(0,a.jsxs)("div",{className:"form-check",children:[(0,a.jsx)("input",{type:"radio",name:"locationType",value:"iframe",checked:"iframe"===u.locationType,onChange:N,className:"form-check-input",id:"locationTypeIframe"}),(0,a.jsx)("label",{className:"form-check-label",htmlFor:"locationTypeIframe",children:"Add Iframe"})]})]})]}),"image"===u.locationType?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"form-label small fw-medium text-muted",children:"Location Image"}),(0,a.jsx)("input",{type:"file",accept:"image/*",onChange:e=>k(e,"locationImage"),required:!i||!u.locationImage,className:"form-control"}),i&&u.locationImage&&(0,a.jsx)("p",{className:"form-text small text-muted mt-1",children:"Current image is uploaded. Leave empty to keep existing image."}),u.locationImage&&(0,a.jsx)("div",{className:"mt-2",children:(0,a.jsx)("img",{src:u.locationImage,alt:"Location Image Preview",className:"rounded",style:{height:"5rem",width:"5rem",objectFit:"cover"}})})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"form-label small fw-medium text-muted",children:"Location Image Alt Text"}),(0,a.jsx)("input",{type:"text",name:"locationAltText",value:u.locationAltText,onChange:N,required:!0,className:"form-control"})]})]}):(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"form-label small fw-medium text-muted",children:"Iframe Code"}),(0,a.jsx)("textarea",{name:"locationIframe",value:u.locationIframe,onChange:N,required:!0,rows:4,className:"form-control",placeholder:"Paste your iframe code here..."})]})]})]})}),(0,a.jsx)("div",{className:"card shadow-sm mb-4",children:(0,a.jsxs)("div",{className:"card-body p-4",children:[(0,a.jsx)("h2",{className:"h5 fw-semibold text-dark mb-4 border-bottom pb-2",children:"FAQs"}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{className:"d-flex justify-content-between align-items-center mb-3",children:[(0,a.jsx)("h3",{className:"h6 fw-medium text-dark mb-0",children:"Frequently Asked Questions"}),(0,a.jsx)("button",{type:"button",onClick:()=>y("faqs",{question:"",answer:""}),className:"btn btn-primary btn-sm",children:"Add FAQ"})]}),u.faqs.map((e,l)=>(0,a.jsxs)("div",{className:"border rounded p-3 mb-3",children:[(0,a.jsxs)("div",{className:"d-flex justify-content-between align-items-center mb-3",children:[(0,a.jsxs)("h4",{className:"fw-medium text-dark mb-0",children:["FAQ ",l+1]}),(0,a.jsx)("button",{type:"button",onClick:()=>w("faqs",l),className:"btn btn-sm btn-outline-danger",children:"Remove"})]}),(0,a.jsxs)("div",{className:"d-flex flex-column gap-3",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"form-label small fw-medium text-muted",children:"Question"}),(0,a.jsx)("input",{type:"text",value:e.question,onChange:e=>v("faqs",l,"question",e.target.value),className:"form-control"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"form-label small fw-medium text-muted",children:"Answer"}),(0,a.jsx)("textarea",{value:e.answer,onChange:e=>v("faqs",l,"answer",e.target.value),rows:3,className:"form-control"})]})]})]},l))]})]})}),(0,a.jsxs)("div",{className:"d-flex justify-content-end gap-3",children:[(0,a.jsx)("button",{type:"button",onClick:()=>o.back(),className:"btn btn-outline-secondary px-4 py-2",children:"Cancel"}),(0,a.jsx)("button",{type:"submit",disabled:m,className:"btn btn-primary px-4 py-2",children:m?i?"Updating...":"Creating...":i?"Update Project":"Create Project"})]})]})]})}e.s(["default",()=>t])},47468,e=>{"use strict";var a=e.i(43476),l=e.i(71645),s=e.i(18566),t=e.i(84827);function i(){(0,s.useRouter)();let e=(0,s.useParams)(),[i,r]=(0,l.useState)(null),[o,m]=(0,l.useState)(!0),[c,n]=(0,l.useState)("");(0,l.useEffect)(()=>{e.id&&d(e.id)},[e.id]);let d=async e=>{try{let a=await fetch(`/api/projects/manage/${e}`),l=await a.json();l.success?r(l.data):n("Failed to fetch project")}catch(e){n("Error fetching project")}finally{m(!1)}};return o?(0,a.jsx)("div",{className:"flex items-center justify-center h-64",children:(0,a.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-4 border-primary border-t-transparent"})}):c?(0,a.jsx)("div",{className:"alert alert-danger",role:"alert",children:c}):i?(0,a.jsx)(t.default,{initialData:i,isEditMode:!0,projectId:e.id}):(0,a.jsx)("div",{className:"alert alert-warning",role:"alert",children:"Project not found"})}e.s(["default",()=>i])}]);
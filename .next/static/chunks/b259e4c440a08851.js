(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,7232,(t,e,a)=>{var s=t.r(98160);e.exports={allStates:function(){var t=[];return s.forEach(function(e){-1==t.indexOf(e.state)&&t.push(e.state)}),t.sort()},allCities:function(){return s.map(function(t){return t.city}).sort()},allCapitals:function(){return s.filter(function(t){return t.isCapital}).map(function(t){return{city:t.city,state:t.state}}).sort()},citiesForState:function(t){return s.filter(function(e){return e.state===t}).map(function(t){return t.city}).sort()},stateForCity:function(t){return s.filter(function(e){return e.city===t}).map(function(t){return t.state})},capitalOf:function(t){return s.filter(function(e){return e.state===t&&e.isCapital}).map(function(t){return t.city})}}},26892,t=>{"use strict";var e=t.i(43476),a=t.i(71645),s=t.i(18566),n=t.i(7232);function i(){let t=(0,s.useRouter)(),i=(0,s.useParams)().id,[l,r]=(0,a.useState)(!1),[c,o]=(0,a.useState)(!0),[d,m]=(0,a.useState)([]),[u,f]=(0,a.useState)([]),[h,p]=(0,a.useState)({name:"",city:"",state:"",country:"India"});(0,a.useEffect)(()=>{m(n.default.allStates())},[]),(0,a.useEffect)(()=>{(async()=>{try{let e=await fetch(`/api/locations/${i}`),a=await e.json();if(a.success){if(p({name:a.data.name,city:a.data.city,state:a.data.state,country:a.data.country}),a.data.state){let t=n.default.citiesForState(a.data.state);f(t)}}else alert("Failed to fetch location data"),t.push("/admin/locations")}catch(e){console.error("Error fetching location:",e),alert("Error fetching location data"),t.push("/admin/locations")}finally{o(!1)}})()},[i,t]);let x=t=>{let{name:e,value:a}=t.target;p(t=>({...t,[e]:a}))},y=async e=>{e.preventDefault(),r(!0);try{let e=await fetch(`/api/locations/${i}`,{method:"PUT",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("adminToken")}`},body:JSON.stringify(h)}),a=await e.json();a.success?t.push("/admin/locations"):alert("Failed to update location: "+a.error)}catch(t){console.error("Submit error:",t),alert("Error updating location: "+(t instanceof Error?t.message:"Unknown error"))}finally{r(!1)}};return c?(0,e.jsx)("div",{className:"flex items-center justify-center h-64",children:(0,e.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-4 border-primary border-t-transparent"})}):(0,e.jsxs)("div",{className:"w-100",children:[(0,e.jsxs)("div",{className:"d-flex align-items-center justify-content-between mb-4",children:[(0,e.jsxs)("div",{children:[(0,e.jsx)("h1",{className:"h2 fw-bold text-dark mb-1",children:"Edit Location"}),(0,e.jsx)("p",{className:"text-muted mb-0",children:"Update location information"})]}),(0,e.jsx)("button",{type:"button",onClick:()=>t.back(),className:"btn btn-outline-secondary d-inline-flex align-items-center px-3 py-2",children:"â† Back to Locations"})]}),(0,e.jsxs)("form",{onSubmit:y,className:"w-100",children:[(0,e.jsx)("div",{className:"card shadow-sm mb-4",children:(0,e.jsxs)("div",{className:"card-body p-4",children:[(0,e.jsx)("h2",{className:"h5 fw-semibold text-dark mb-4 border-bottom pb-2",children:"Location Information"}),(0,e.jsxs)("div",{className:"row g-3",children:[(0,e.jsxs)("div",{className:"col-12 col-md-6",children:[(0,e.jsx)("label",{className:"form-label small fw-medium text-muted",children:"Location Name"}),(0,e.jsx)("input",{type:"text",name:"name",value:h.name,onChange:x,required:!0,className:"form-control"})]}),(0,e.jsxs)("div",{className:"col-12 col-md-6",children:[(0,e.jsx)("label",{className:"form-label small fw-medium text-muted",children:"State"}),(0,e.jsxs)("select",{name:"state",value:h.state,onChange:t=>{let e=t.target.value;p(t=>({...t,state:e,city:""})),e?f(n.default.citiesForState(e)):f([])},required:!0,className:"form-control form-select",children:[(0,e.jsx)("option",{value:"",children:"Select State"}),d.map(t=>(0,e.jsx)("option",{value:t,children:t},t))]})]}),(0,e.jsxs)("div",{className:"col-12 col-md-6",children:[(0,e.jsx)("label",{className:"form-label small fw-medium text-muted",children:"City"}),(0,e.jsxs)("select",{name:"city",value:h.city,onChange:x,required:!0,disabled:!h.state,className:"form-control form-select",children:[(0,e.jsx)("option",{value:"",children:h.state?"Select City":"Select State first"}),u.map(t=>(0,e.jsx)("option",{value:t,children:t},t))]}),!h.state&&(0,e.jsx)("small",{className:"text-muted",children:"Please select a state first"})]}),(0,e.jsxs)("div",{className:"col-12 col-md-6",children:[(0,e.jsx)("label",{className:"form-label small fw-medium text-muted",children:"Country"}),(0,e.jsx)("input",{type:"text",name:"country",value:h.country,onChange:x,className:"form-control"})]})]})]})}),(0,e.jsxs)("div",{className:"d-flex justify-content-end gap-3",children:[(0,e.jsx)("button",{type:"button",onClick:()=>t.back(),className:"btn btn-outline-secondary px-4 py-2",children:"Cancel"}),(0,e.jsx)("button",{type:"submit",disabled:l,className:"btn btn-primary px-4 py-2",children:l?"Updating...":"Update Location"})]})]})]})}t.s(["default",()=>i])}]);
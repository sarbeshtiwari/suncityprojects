(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,58539,e=>{"use strict";var s=e.i(43476),t=e.i(71645),a=e.i(22016);function l(){let[e,l]=(0,t.useState)([]),[r,i]=(0,t.useState)(!0),[d,c]=(0,t.useState)(null);(0,t.useEffect)(()=>{n()},[]);let n=async()=>{try{let e=localStorage.getItem("adminToken"),s=await fetch("/api/admin/blogs",{headers:{Authorization:`Bearer ${e}`}});if(s.ok){let e=await s.json();l(e.data)}else c("Failed to fetch blogs")}catch(e){c("Error fetching blogs"),console.error("Error:",e)}finally{i(!1)}},o=async s=>{if(window.confirm("Are you sure you want to delete this blog?"))try{let t=localStorage.getItem("adminToken");(await fetch(`/api/blogs/${s}`,{method:"DELETE",headers:{Authorization:`Bearer ${t}`}})).ok?l(e.filter(e=>e.slug!==s)):alert("Failed to delete blog")}catch(e){console.error("Error deleting blog:",e),alert("Error deleting blog")}},m=async(e,s)=>{try{let t=await fetch("/api/blogs/updateStatus",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({_id:e,isActive:!s})}),a=await t.json();a.success?l(t=>t.map(t=>t._id===e?{...t,isActive:!s,isPublished:!s}:t)):alert(a.message||"Failed to update status")}catch(e){console.error("Error updating project status:",e),alert("Error updating project status")}};return r?(0,s.jsx)("div",{className:"d-flex align-items-center justify-content-center",style:{minHeight:"50vh"},children:(0,s.jsxs)("div",{className:"text-center",children:[(0,s.jsx)("div",{className:"spinner mx-auto mb-4",style:{width:"3rem",height:"3rem"}}),(0,s.jsx)("p",{className:"text-muted",children:"Loading blogs..."})]})}):(0,s.jsxs)("div",{className:"mb-5",children:[(0,s.jsxs)("div",{className:"d-flex justify-content-between align-items-center mb-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("h1",{className:"h2 fw-bold text-dark mb-1",children:"Blogs"}),(0,s.jsx)("p",{className:"text-muted mb-0",children:"Manage your blog posts"})]}),(0,s.jsx)(a.default,{href:"/admin/blogs/add",className:"btn btn-primary",children:"Add New Blog"})]}),d&&(0,s.jsx)("div",{className:"alert alert-danger",role:"alert",children:d}),(0,s.jsx)("div",{className:"card shadow-sm",children:(0,s.jsx)("div",{className:"table-responsive",children:(0,s.jsxs)("table",{className:"table table-hover align-middle mb-0",children:[(0,s.jsx)("thead",{className:"table-light",children:(0,s.jsxs)("tr",{children:[(0,s.jsx)("th",{scope:"col",className:"text-uppercase small text-muted",children:"Title"}),(0,s.jsx)("th",{scope:"col",className:"text-uppercase small text-muted",children:"Author"}),(0,s.jsx)("th",{scope:"col",className:"text-uppercase small text-muted",children:"Category"}),(0,s.jsx)("th",{scope:"col",className:"text-uppercase small text-muted",children:"Published"}),(0,s.jsx)("th",{scope:"col",className:"text-uppercase small text-muted",children:"Status"}),(0,s.jsx)("th",{scope:"col",className:"text-uppercase small text-muted",children:"Actions"})]})}),(0,s.jsx)("tbody",{children:e.map(e=>(0,s.jsxs)("tr",{children:[(0,s.jsx)("td",{children:(0,s.jsxs)("div",{className:"d-flex flex-column",children:[(0,s.jsx)("span",{className:"fw-medium text-dark",children:e.title}),(0,s.jsxs)("small",{className:"text-muted",children:[e.excerpt.substring(0,60),"..."]})]})}),(0,s.jsx)("td",{children:(0,s.jsx)("span",{className:"text-muted",children:e.author})}),(0,s.jsx)("td",{children:(0,s.jsx)("span",{className:"badge bg-secondary text-capitalize",children:e.category.replace("-"," ")})}),(0,s.jsx)("td",{children:(0,s.jsx)("span",{className:"text-muted",children:new Date(e.publishedDate).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"})})}),(0,s.jsx)("td",{children:(0,s.jsx)("button",{className:`badge rounded-pill border-0 px-3 py-2 ${e.isPublished?"bg-success":"bg-danger"}`,style:{cursor:"pointer"},onClick:()=>m(e._id,e.isPublished),children:(0,s.jsx)("span",{className:`badge rounded-pill ${e.isPublished?"bg-success":"bg-danger"}`,children:e.isPublished?"Published":"Draft"})})}),(0,s.jsx)("td",{children:(0,s.jsxs)("div",{className:"d-flex gap-2",children:[(0,s.jsx)(a.default,{href:`/admin/blogs/edit/${e.slug}`,className:"btn btn-sm btn-outline-primary",children:"Edit"}),(0,s.jsx)("button",{onClick:s=>{s.stopPropagation(),o(e.slug)},className:"btn btn-sm btn-outline-danger",children:"Delete"})]})})]},e._id))})]})})}),0===e.length&&(0,s.jsxs)("div",{className:"text-center py-5",children:[(0,s.jsx)("div",{className:"text-muted mb-3",children:(0,s.jsx)("i",{className:"fas fa-newspaper",style:{fontSize:"3rem"}})}),(0,s.jsx)("h4",{className:"text-muted",children:"No blogs found"}),(0,s.jsx)("p",{className:"text-muted",children:"Get started by creating your first blog post."}),(0,s.jsx)(a.default,{href:"/admin/blogs/add",className:"btn btn-primary",children:"Add New Blog"})]})]})}e.s(["default",()=>l])}]);
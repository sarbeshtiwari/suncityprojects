(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,1759,e=>{"use strict";var a=e.i(43476),l=e.i(71645),t=e.i(18566);function s({initialData:e,isEditMode:r=!1,blogSlug:i}={}){var c;let o=(0,t.useRouter)(),[n,d]=(0,l.useState)(!1),[m,u]=(0,l.useState)(new Set),[h,x]=(0,l.useState)({metaTitle:e?.metaTitle||"",metaKeywords:e?.metaKeywords||"",metaDescription:e?.metaDescription||"",otherMetaTags:e?.otherMetaTags||"",schemaScript:e?.schemaScript||"",title:e?.title||"",slug:e?.slug||"",content:e?.content||"",excerpt:e?.excerpt||"",image:e?.image||"",altText:e?.altText||"",author:e?.author||"Suncity Projects",publishedDate:(c=e?.publishedDate)?"string"==typeof c?/^\d{4}-\d{2}-\d{2}$/.test(c)?c:c.split("T")[0]:new Date(c).toISOString().split("T")[0]:new Date().toISOString().split("T")[0],isPublished:e?.isPublished===void 0||e.isPublished,isActive:e?.isActive===void 0||e.isActive,tags:e?.tags||[],category:e?.category||"real-estate"}),[g,p]=(0,l.useState)(""),b=e=>{let{name:a,value:l,type:t}=e.target;x(s=>{let r={...s,[a]:"checkbox"===t?e.target.checked:l};return"title"===a&&l&&(r.slug=l.toLowerCase().replace(/[^a-z0-9\s-]/g,"").replace(/\s+/g,"-").replace(/-+/g,"-").trim()),r})},f=()=>{let e=g.trim();e&&!h.tags.includes(e)&&(x(a=>({...a,tags:[...a.tags,e]})),p(""))},j=async(e,a)=>{let l=`${a}-${Date.now()}`;u(e=>new Set(e).add(l));try{let a=new FormData;a.append("file",e),a.append("folder","blogs");let l=await fetch("/api/upload",{method:"POST",body:a});if(l.ok)return(await l.json()).url;throw Error("Upload failed")}catch(e){return console.error("Upload error:",e),alert("Failed to upload file"),null}finally{u(e=>{let a=new Set(e);return a.delete(l),a})}},N=async(e,a)=>{let l=e.target.files?.[0];if(!l)return;let t=await j(l,a);t&&x(e=>({...e,[a]:t}))},v=async e=>{e.preventDefault(),d(!0);try{let e=["title","slug","content","excerpt","altText"];r&&h.image||e.push("image");let a=e.filter(e=>!h[e]);if(a.length>0){alert(`Please fill in all required fields: ${a.join(", ")}`),d(!1);return}let l=r?`/api/blogs/${i}`:"/api/blogs",t=await fetch(l,{method:r?"PUT":"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("adminToken")}`},body:JSON.stringify(h)}),s=await t.json();if(s.success)alert(r?"Blog updated successfully!":"Blog created successfully!"),o.push("/admin/blogs");else{let e=s.details?`${s.error}: ${Array.isArray(s.details)?s.details.join(", "):s.details}`:s.error;alert(`Failed to ${r?"update":"create"} blog: `+e)}}catch(e){console.error(`Error ${r?"updating":"creating"} blog:`,e),alert(`Error ${r?"updating":"creating"} blog: `+(e instanceof Error?e.message:"Unknown error"))}finally{d(!1)}};return(0,a.jsxs)("div",{className:"w-100",children:[(0,a.jsxs)("div",{className:"d-flex align-items-center justify-content-between mb-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{className:"h2 fw-bold text-dark mb-1",children:r?"Edit Blog":"Add New Blog"}),(0,a.jsx)("p",{className:"text-muted mb-0",children:r?"Update the blog post":"Create a new blog post"})]}),(0,a.jsx)("button",{type:"button",onClick:()=>o.back(),className:"btn btn-outline-secondary d-inline-flex align-items-center px-3 py-2",children:"← Back to Blogs"})]}),(0,a.jsxs)("form",{onSubmit:v,className:"w-100",children:[(0,a.jsx)("div",{className:"card shadow-sm mb-4",children:(0,a.jsxs)("div",{className:"card-body p-4",children:[(0,a.jsx)("h2",{className:"h5 fw-semibold text-dark mb-4 border-bottom pb-2",children:"SEO Details"}),(0,a.jsxs)("div",{className:"row g-3",children:[(0,a.jsxs)("div",{className:"col-12 col-lg-6",children:[(0,a.jsx)("label",{className:"form-label small fw-medium text-muted",children:"Meta Title"}),(0,a.jsx)("input",{type:"text",name:"metaTitle",value:h.metaTitle,onChange:b,className:"form-control"})]}),(0,a.jsxs)("div",{className:"col-12 col-lg-6",children:[(0,a.jsx)("label",{className:"form-label small fw-medium text-muted",children:"Meta Keywords"}),(0,a.jsx)("input",{type:"text",name:"metaKeywords",value:h.metaKeywords,onChange:b,className:"form-control"})]}),(0,a.jsxs)("div",{className:"col-12",children:[(0,a.jsx)("label",{className:"form-label small fw-medium text-muted",children:"Meta Description"}),(0,a.jsx)("textarea",{name:"metaDescription",value:h.metaDescription,onChange:b,className:"form-control",rows:3})]})]})]})}),(0,a.jsx)("div",{className:"card shadow-sm mb-4",children:(0,a.jsxs)("div",{className:"card-body p-4",children:[(0,a.jsx)("h2",{className:"h5 fw-semibold text-dark mb-4 border-bottom pb-2",children:"Blog Information"}),(0,a.jsxs)("div",{className:"row g-3",children:[(0,a.jsxs)("div",{className:"col-12 col-lg-8",children:[(0,a.jsx)("label",{className:"form-label small fw-medium text-muted",children:"Title"}),(0,a.jsx)("input",{type:"text",name:"title",value:h.title,onChange:b,required:!0,className:"form-control"})]}),(0,a.jsxs)("div",{className:"col-12 col-lg-4",children:[(0,a.jsx)("label",{className:"form-label small fw-medium text-muted",children:"Slug (URL-friendly name)"}),(0,a.jsx)("input",{type:"text",name:"slug",value:h.slug,onChange:b,placeholder:"Will be auto-generated from title",className:"form-control"}),(0,a.jsx)("p",{className:"form-text small text-muted",children:"Leave empty to auto-generate from title"})]}),(0,a.jsxs)("div",{className:"col-12 col-lg-6",children:[(0,a.jsx)("label",{className:"form-label small fw-medium text-muted",children:"Author"}),(0,a.jsx)("input",{type:"text",name:"author",value:h.author,onChange:b,required:!0,className:"form-control"})]}),(0,a.jsxs)("div",{className:"col-12 col-lg-6",children:[(0,a.jsx)("label",{className:"form-label small fw-medium text-muted",children:"Category"}),(0,a.jsxs)("select",{name:"category",value:h.category,onChange:b,required:!0,className:"form-control form-select",children:[(0,a.jsx)("option",{value:"real-estate",children:"Real Estate"}),(0,a.jsx)("option",{value:"investment",children:"Investment"}),(0,a.jsx)("option",{value:"lifestyle",children:"Lifestyle"}),(0,a.jsx)("option",{value:"legal",children:"Legal"}),(0,a.jsx)("option",{value:"tips",children:"Tips"}),(0,a.jsx)("option",{value:"news",children:"News"})]})]}),(0,a.jsxs)("div",{className:"col-12 col-lg-6",children:[(0,a.jsx)("label",{className:"form-label small fw-medium text-muted",children:"Published Date"}),(0,a.jsx)("input",{type:"date",name:"publishedDate",value:h.publishedDate,onChange:b,required:!0,className:"form-control"})]}),(0,a.jsxs)("div",{className:"col-12 col-lg-6 d-flex align-items-center",children:[(0,a.jsxs)("div",{className:"form-check me-3",children:[(0,a.jsx)("input",{type:"checkbox",name:"isPublished",checked:h.isPublished,onChange:b,className:"form-check-input",id:"isPublished"}),(0,a.jsx)("label",{className:"form-check-label small text-muted",htmlFor:"isPublished",children:"Published"})]}),(0,a.jsxs)("div",{className:"form-check",children:[(0,a.jsx)("input",{type:"checkbox",name:"isActive",checked:h.isActive,onChange:b,className:"form-check-input",id:"isActive"}),(0,a.jsx)("label",{className:"form-check-label small text-muted",htmlFor:"isActive",children:"Active"})]})]})]})]})}),(0,a.jsx)("div",{className:"card shadow-sm mb-4",children:(0,a.jsxs)("div",{className:"card-body p-4",children:[(0,a.jsx)("h2",{className:"h5 fw-semibold text-dark mb-4 border-bottom pb-2",children:"Content"}),(0,a.jsxs)("div",{className:"row g-3",children:[(0,a.jsxs)("div",{className:"col-12",children:[(0,a.jsx)("label",{className:"form-label small fw-medium text-muted",children:"Excerpt (Short Description)"}),(0,a.jsx)("textarea",{name:"excerpt",value:h.excerpt,onChange:b,required:!0,rows:3,className:"form-control",placeholder:"Brief description of the blog post..."})]}),(0,a.jsxs)("div",{className:"col-12",children:[(0,a.jsx)("label",{className:"form-label small fw-medium text-muted",children:"Content"}),(0,a.jsx)("textarea",{name:"content",value:h.content,onChange:b,required:!0,rows:10,className:"form-control",placeholder:"Write your blog content here..."}),(0,a.jsx)("p",{className:"form-text small text-muted",children:"You can use HTML tags for formatting"})]})]})]})}),(0,a.jsx)("div",{className:"card shadow-sm mb-4",children:(0,a.jsxs)("div",{className:"card-body p-4",children:[(0,a.jsx)("h2",{className:"h5 fw-semibold text-dark mb-4 border-bottom pb-2",children:"Featured Image"}),(0,a.jsxs)("div",{className:"row g-3",children:[(0,a.jsxs)("div",{className:"col-12 col-lg-6",children:[(0,a.jsx)("label",{className:"form-label small fw-medium text-muted",children:"Blog Image"}),(0,a.jsx)("input",{type:"file",accept:"image/*",onChange:e=>N(e,"image"),required:!r||!h.image,className:"form-control"}),r&&h.image&&(0,a.jsx)("p",{className:"form-text small text-muted mt-1",children:"Current image is uploaded. Leave empty to keep existing image."}),h.image&&(0,a.jsx)("div",{className:"mt-2",children:(0,a.jsx)("img",{src:h.image,alt:"Blog Image Preview",className:"rounded",style:{height:"10rem",width:"15rem",objectFit:"cover"}})})]}),(0,a.jsxs)("div",{className:"col-12 col-lg-6",children:[(0,a.jsx)("label",{className:"form-label small fw-medium text-muted",children:"Alt Text"}),(0,a.jsx)("input",{type:"text",name:"altText",value:h.altText,onChange:b,required:!0,className:"form-control"})]})]})]})}),(0,a.jsx)("div",{className:"card shadow-sm mb-4",children:(0,a.jsxs)("div",{className:"card-body p-4",children:[(0,a.jsx)("h2",{className:"h5 fw-semibold text-dark mb-4 border-bottom pb-2",children:"Tags"}),(0,a.jsx)("div",{className:"row g-3",children:(0,a.jsxs)("div",{className:"col-12",children:[h.tags.length>0&&(0,a.jsx)("div",{className:"mb-3",children:(0,a.jsx)("div",{className:"d-flex flex-wrap gap-2",children:h.tags.map((e,l)=>(0,a.jsxs)("span",{className:"badge bg-primary d-inline-flex align-items-center gap-1",style:{fontSize:"0.875rem"},children:[e,(0,a.jsx)("button",{type:"button",onClick:()=>{x(a=>({...a,tags:a.tags.filter(a=>a!==e)}))},className:"btn btn-sm p-0 ms-1",style:{fontSize:"0.6rem",background:"none",border:"none",color:"white",lineHeight:"1"},"aria-label":`Remove ${e} tag`,children:"×"})]},l))})}),(0,a.jsx)("div",{className:"input-group",children:(0,a.jsx)("input",{type:"text",value:g,onChange:e=>{p(e.target.value)},onKeyDown:e=>{"Enter"===e.key?(e.preventDefault(),f()):","===e.key&&(e.preventDefault(),f())},className:"form-control",placeholder:"Type a tag and press Enter or comma to add"})}),(0,a.jsx)("p",{className:"form-text small text-muted",children:"Type a tag and press Enter or comma to add it. Click the × on a tag to remove it."})]})})]})}),(0,a.jsxs)("div",{className:"d-flex justify-content-end gap-3",children:[(0,a.jsx)("button",{type:"button",onClick:()=>o.back(),className:"btn btn-outline-secondary px-4 py-2",children:"Cancel"}),(0,a.jsx)("button",{type:"submit",disabled:n,className:"btn btn-primary px-4 py-2",children:n?r?"Updating...":"Creating...":r?"Update Blog":"Create Blog"})]})]})]})}e.s(["default",()=>s])},9116,e=>{"use strict";var a=e.i(43476),l=e.i(71645),t=e.i(18566),s=e.i(1759);function r(){(0,t.useRouter)();let e=(0,t.useParams)(),[r,i]=(0,l.useState)(null),[c,o]=(0,l.useState)(!0),[n,d]=(0,l.useState)("");(0,l.useEffect)(()=>{e.slug&&m(e.slug)},[e.slug]);let m=async e=>{try{let a=await fetch(`/api/blogs/${e}`),l=await a.json();l.success?i(l.data):d("Failed to fetch blog")}catch(e){d("Error fetching blog")}finally{o(!1)}};return c?(0,a.jsx)("div",{className:"flex items-center justify-center h-64",children:(0,a.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-4 border-primary border-t-transparent"})}):n?(0,a.jsx)("div",{className:"alert alert-danger",role:"alert",children:n}):r?(0,a.jsx)(s.default,{initialData:r,isEditMode:!0,blogSlug:e.slug}):(0,a.jsx)("div",{className:"alert alert-warning",role:"alert",children:"Blog not found"})}e.s(["default",()=>r])}]);
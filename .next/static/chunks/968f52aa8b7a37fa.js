(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,7232,(t,e,a)=>{var n=t.r(98160);e.exports={allStates:function(){var t=[];return n.forEach(function(e){-1==t.indexOf(e.state)&&t.push(e.state)}),t.sort()},allCities:function(){return n.map(function(t){return t.city}).sort()},allCapitals:function(){return n.filter(function(t){return t.isCapital}).map(function(t){return{city:t.city,state:t.state}}).sort()},citiesForState:function(t){return n.filter(function(e){return e.state===t}).map(function(t){return t.city}).sort()},stateForCity:function(t){return n.filter(function(e){return e.city===t}).map(function(t){return t.state})},capitalOf:function(t){return n.filter(function(e){return e.state===t&&e.isCapital}).map(function(t){return t.city})}}},49003,t=>{"use strict";var e=t.i(43476),a=t.i(71645),n=t.i(18566),s=t.i(7232);function i(){let t=(0,n.useRouter)(),i=(0,n.useParams)(),r=i.id&&"add"!==i.id,l=i.id,[c,o]=(0,a.useState)(!1),[d,u]=(0,a.useState)(r),[m,f]=(0,a.useState)([]),[h,p]=(0,a.useState)([]),[x,y]=(0,a.useState)({name:"",city:"",state:"",country:"India"});(0,a.useEffect)(()=>{f(s.default.allStates())},[]),(0,a.useEffect)(()=>{r&&l&&(async()=>{try{let e=await fetch(`/api/locations/${l}`),a=await e.json();if(a.success){if(y({name:a.data.name,city:a.data.city,state:a.data.state,country:a.data.country}),a.data.state){let t=s.default.citiesForState(a.data.state);p(t)}}else alert("Failed to fetch location data"),t.push("/admin/locations")}catch(e){console.error("Error fetching location:",e),alert("Error fetching location data"),t.push("/admin/locations")}finally{u(!1)}})()},[r,l,t]);let b=t=>{let{name:e,value:a}=t.target;y(t=>({...t,[e]:a}))},j=async e=>{e.preventDefault(),o(!0);try{let e=r?`/api/locations/${l}`:"/api/locations",a=r?"PUT":"POST",n=await fetch(e,{method:a,headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("adminToken")}`},body:JSON.stringify(x)}),s=await n.json();s.success?t.push("/admin/locations"):alert(`Failed to ${r?"update":"create"} location: `+s.error)}catch(t){console.error("Submit error:",t),alert(`Error ${r?"updating":"creating"} location: `+(t instanceof Error?t.message:"Unknown error"))}finally{o(!1)}};return d?(0,e.jsx)("div",{className:"flex items-center justify-center h-64",children:(0,e.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-4 border-primary border-t-transparent"})}):(0,e.jsxs)("div",{className:"w-100",children:[(0,e.jsxs)("div",{className:"d-flex align-items-center justify-content-between mb-4",children:[(0,e.jsxs)("div",{children:[(0,e.jsx)("h1",{className:"h2 fw-bold text-dark mb-1",children:r?"Edit Location":"Add New Location"}),(0,e.jsx)("p",{className:"text-muted mb-0",children:r?"Update location information":"Create a new location for your projects"})]}),(0,e.jsx)("button",{type:"button",onClick:()=>t.back(),className:"btn btn-outline-secondary d-inline-flex align-items-center px-3 py-2",children:"â† Back to Locations"})]}),(0,e.jsxs)("form",{onSubmit:j,className:"w-100",children:[(0,e.jsx)("div",{className:"card shadow-sm mb-4",children:(0,e.jsxs)("div",{className:"card-body p-4",children:[(0,e.jsx)("h2",{className:"h5 fw-semibold text-dark mb-4 border-bottom pb-2",children:"Location Information"}),(0,e.jsxs)("div",{className:"row g-3",children:[(0,e.jsxs)("div",{className:"col-12 col-md-6",children:[(0,e.jsx)("label",{className:"form-label small fw-medium text-muted",children:"Location Name"}),(0,e.jsx)("input",{type:"text",name:"name",value:x.name,onChange:b,required:!0,className:"form-control"})]}),(0,e.jsxs)("div",{className:"col-12 col-md-6",children:[(0,e.jsx)("label",{className:"form-label small fw-medium text-muted",children:"State"}),(0,e.jsxs)("select",{name:"state",value:x.state,onChange:t=>{let e=t.target.value;y(t=>({...t,state:e,city:""})),e?p(s.default.citiesForState(e)):p([])},required:!0,className:"form-control form-select",children:[(0,e.jsx)("option",{value:"",children:"Select State"}),m.map(t=>(0,e.jsx)("option",{value:t,children:t},t))]})]}),(0,e.jsxs)("div",{className:"col-12 col-md-6",children:[(0,e.jsx)("label",{className:"form-label small fw-medium text-muted",children:"City"}),(0,e.jsxs)("select",{name:"city",value:x.city,onChange:b,required:!0,disabled:!x.state,className:"form-control form-select",children:[(0,e.jsx)("option",{value:"",children:x.state?"Select City":"Select State first"}),h.map(t=>(0,e.jsx)("option",{value:t,children:t},t))]}),!x.state&&(0,e.jsx)("small",{className:"text-muted",children:"Please select a state first"})]}),(0,e.jsxs)("div",{className:"col-12 col-md-6",children:[(0,e.jsx)("label",{className:"form-label small fw-medium text-muted",children:"Country"}),(0,e.jsx)("input",{type:"text",name:"country",value:x.country,onChange:b,className:"form-control"})]})]})]})}),(0,e.jsxs)("div",{className:"d-flex justify-content-end gap-3",children:[(0,e.jsx)("button",{type:"button",onClick:()=>t.back(),className:"btn btn-outline-secondary px-4 py-2",children:"Cancel"}),(0,e.jsx)("button",{type:"submit",disabled:c,className:"btn btn-primary px-4 py-2",children:c?r?"Updating...":"Creating...":r?"Update Location":"Create Location"})]})]})]})}t.s(["default",()=>i])}]);